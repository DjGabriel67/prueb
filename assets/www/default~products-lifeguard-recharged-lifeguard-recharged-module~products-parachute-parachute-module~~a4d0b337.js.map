{"version":3,"sources":["./libs/features/credits/src/presentation/middlewares/base.middleware.ts"],"names":[],"mappings":"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","file":"default~products-lifeguard-recharged-lifeguard-recharged-module~products-parachute-parachute-module~~a4d0b337.js","sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport {\n  ActivatedRoute,\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n  UrlTree\n} from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { CoreException } from '@nequi/commons/exceptions';\nimport { ModuleConfigProvider, TranslateProvider, UserInfoProvider } from '@nequi/features/commons';\nimport { AnalyticsInteractor, AnalyticsType, FlowType } from '@nequi/features/commons/core';\nimport { AlertService, DynatraceService } from '@nequi/features/commons/presentation';\nimport {\n  CreditInteractor,\n  CreditStillOpenException,\n  CustomerCreditsEntity,\n  DontHaveApprovalAttemptException,\n  DontHaveApprovalAttemptWithDataException,\n  GetApprovalAttemptEntity,\n  HaveApprovalAttemptException,\n  NeverBeenApprovedFrontException,\n  UnavailabilityTimeException\n} from '@nequi/features/credits/core';\nimport {\n  CardModalService,\n  FirstTimeMessageBottomSheetService,\n  FullscreenModalService,\n  LoadingService,\n  ModalButton,\n  ToastService\n} from '@nequi/ui';\nimport { getFormattedDateTimes } from '@nequi/utils/date';\nimport {\n  openUrl,\n  stringsArrayToObjectWithValues,\n  toCamelCaseProperties\n} from '@nequi/utils/functions';\n\nimport { BaseConfig } from '../middlewares/base.config';\nimport { ApprovalFrontViewModel } from '../organisms/approval-front/approval-front.view-model';\nimport { CreditInfoModel } from '../services/credit-info.model';\nimport { CreditLoggerService } from '../services/credit-logger.service';\nimport { CustomerFinancialService } from '../services/customer-finacial.service';\nimport { CreditsMiddlewareParams } from './midleware.params';\nimport { ModalParams } from './modal.params';\n\nexport enum MiddlewareModuleName {\n  PROPELLER = 'propeller',\n  PARACHUTE = 'parachute',\n  LIFEGUARD_RECHARGED = 'lifeguardRecharged',\n}\n\n@Injectable()\nexport abstract class BaseMiddleware implements CanActivate {\n  protected config = BaseConfig;\n  protected navController: NavController;\n  protected translateProvider: TranslateProvider;\n  protected creditInteractor: CreditInteractor;\n  protected loadingService: LoadingService;\n  protected cardModalService: CardModalService;\n  protected route: ActivatedRoute;\n  protected toastService: ToastService;\n  protected data: CreditsMiddlewareParams;\n  protected nextRoute: string;\n  protected alertService: AlertService;\n  protected dynatraceService: DynatraceService;\n  protected getCustomerCreditException = {};\n\n  private router: Router;\n  private firstTimeMessageBottomSheetService: FirstTimeMessageBottomSheetService;\n  private creditLoggerService: CreditLoggerService;\n  private analyticsInteractor: AnalyticsInteractor;\n  private creditInfoModel: CreditInfoModel;\n  private customerFinancialService: CustomerFinancialService;\n  private fullscreenModalService: FullscreenModalService;\n  private approvalFrontViewModel: ApprovalFrontViewModel;\n  private userInfoProvider: UserInfoProvider;\n  private moduleConfigProvider: ModuleConfigProvider;\n  private approvalFrontException = {};\n\n  constructor(injector: Injector) {\n    this.navController = injector.get(NavController);\n    this.router = injector.get(Router);\n    this.route = injector.get(ActivatedRoute);\n    this.translateProvider = injector.get(TranslateProvider);\n    this.creditInteractor = injector.get(CreditInteractor);\n    this.loadingService = injector.get(LoadingService);\n    this.firstTimeMessageBottomSheetService = injector.get(FirstTimeMessageBottomSheetService);\n    this.alertService = injector.get(AlertService);\n    this.creditLoggerService = injector.get(CreditLoggerService);\n    this.analyticsInteractor = injector.get(AnalyticsInteractor);\n    this.cardModalService = injector.get(CardModalService);\n    this.creditInfoModel = injector.get(CreditInfoModel);\n    this.customerFinancialService = injector.get(CustomerFinancialService);\n    this.fullscreenModalService = injector.get(FullscreenModalService);\n    this.toastService = injector.get(ToastService);\n    this.approvalFrontViewModel = injector.get(ApprovalFrontViewModel);\n    this.userInfoProvider = injector.get(UserInfoProvider);\n    this.moduleConfigProvider = injector.get(ModuleConfigProvider);\n    this.dynatraceService = injector.get(DynatraceService);\n  }\n\n  protected abstract getCustomerCreditsFail(error): Promise<boolean>;\n  protected abstract setGetCustomerCreditsException();\n\n  public async canActivate(route: ActivatedRouteSnapshot): Promise<boolean | UrlTree> {\n    this.data = route.data as CreditsMiddlewareParams;\n    await this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n\n    if (!this.config.validPaths.includes(this.router.url)) {\n      return true;\n    }\n\n    await this.setAnalyticsBeforeBegin();\n    this.checkDeepLink();\n    this.setGetCustomerCreditsException();\n    this.setApprovalFrontException();\n\n    const isActivate = await this.onValidateToRedirect();\n\n    await this.dynatraceService.setAnalyticsOfEnd();\n\n    return isActivate;\n  }\n\n  public async validateGetCustomerCredit(): Promise<boolean> {\n    try {\n      await this.loadingService.show();\n      const data = await this.getCreditInfo();\n\n      await this.loadingService.hideWithoutFeedback();\n\n      return this.getCustomerCreditsSuccess(data);\n    } catch (error) {\n      await this.loadingService.hideWithoutFeedback();\n      this.dynatraceService.setCustomError(error);\n\n      if (error.constructor === CreditStillOpenException) {\n        await this.showCardModal({ i18nKey: BaseConfig.common.modal.paymentIsStillProcessing });\n\n        return;\n      }\n\n      if (error.constructor === UnavailabilityTimeException) {\n        await this.showPromptAlertUnavailabilityTime(error);\n\n        return;\n      }\n\n      return this.getCustomerCreditsFail(error);\n    }\n  }\n\n  public async showCardModal<T = void>(params: ModalParams): Promise<T> {\n    const message = params.i18nKey ? this.translateProvider.get(params.i18nKey) : params.message;\n\n    const buttons: ModalButton[] = [\n      {\n        text: message.buttons.accept,\n        handler: async () => params.onAccept?.(),\n      },\n    ];\n\n    if (message.buttons?.cancel) {\n      buttons.push({\n        text: message.buttons.cancel,\n        color: 'medianoche-gray',\n        handler: async () => params.onCancel?.(),\n      });\n    }\n\n    if (message.link) {\n      buttons.push({\n        isLink: true,\n        text: message.link.text,\n        handler: () => {\n          openUrl(message.link.url);\n        },\n      });\n    }\n\n    const result = await this.cardModalService.show({\n      title: message.title,\n      imgPath: message.image,\n      content: message.description,\n      buttons: buttons,\n    });\n\n    return result?.data as Promise<T>;\n  }\n\n  public async showPromptAlertUnavailabilityTime(error: CoreException) {\n    const i18n = this.translateProvider.get(\n      this.config.common.alert.unavailabilityTime.alertconfig\n    );\n\n    const messages = {\n      header: i18n.title,\n      message: error.message,\n      buttons: {\n        accept: i18n.button,\n      },\n    };\n\n    return this.alertService.show({\n      messages,\n      handlers: {\n        accept: () => this.navController.navigateRoot(this.config.routes.dashboard),\n      },\n    });\n  }\n\n  public setMaxAttemptApprovalFront(data: GetApprovalAttemptEntity) {\n    this.approvalFrontViewModel.info.attempt.maxAttempt = data?.attempts?.maxAttempt ?? null;\n  }\n\n  public async processGetApprovalAttemptError(error: CoreException): Promise<boolean> {\n    this.dynatraceService.setCustomError(error);\n\n    const messages = this.translateProvider.get(\n      this.config[this.data.moduleName].modal.dontHaveApprovalAttempt\n    );\n\n    messages.description = this.translateProvider.get(\n      this.config[this.data.moduleName].modal.dontHaveApprovalAttemptDescription,\n      {\n        limitedConsultations: String((error.data as GetApprovalAttemptEntity).attempts.maxAttempt),\n      }\n    );\n\n    this.showCardModal({ message: messages } as ModalParams);\n\n    return false;\n  }\n\n  protected async getCustomerCreditsSuccess(data: CustomerCreditsEntity): Promise<boolean> {\n    this.creditInfoModel.customerCreditInfo = data;\n    const { preapproved, credit } = data;\n\n    const creditUserInfo = this.customerFinancialService.creditUserInfo;\n\n    if (preapproved) {\n      this.customerFinancialService.updateCreditUser({\n        ...creditUserInfo,\n        hasPreapproved: true,\n        hasCredit: false,\n      });\n\n      this.nextRoute = this.data.redirectToPreapproved;\n\n      return this.showWelcome();\n    }\n\n    if (credit) {\n      this.customerFinancialService.updateCreditUser({\n        ...creditUserInfo,\n        hasPreapproved: false,\n        hasCredit: true,\n      });\n\n      this.nextRoute = this.data.redirectToPayment;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  protected async showWelcome(): Promise<boolean> {\n    const bottomSheetMessages = this.translateProvider.get(\n      String(this.data.bottomSheetKey.welcome)\n    );\n\n    const result = await this.firstTimeMessageBottomSheetService.show({\n      icon: bottomSheetMessages.image,\n      message: bottomSheetMessages.message,\n      content: bottomSheetMessages.content,\n      url: bottomSheetMessages.url,\n      cssClass: 'first-time-message--icon-standard',\n      header: {\n        view: true,\n        action: () => this.firstTimeMessageBottomSheetService.hide(),\n      },\n      button: {\n        label: bottomSheetMessages.button,\n        color: 'guayaba',\n        fill: 'outline',\n        action: async () => this.firstTimeMessageBottomSheetService.hide(true),\n      },\n    });\n\n    if (result?.data) {\n      this.setAnalyticsIntentionOfBegin();\n\n      this.creditLoggerService.save({\n        flowType: this.data.flowType,\n        i18nKey: this.config[this.data.moduleName].logs.welcome,\n      });\n    }\n\n    if (this.data.flowType === FlowType.PARACHUTE) {\n      await this.showCardModal({ i18nKey: BaseConfig.parachute.modal.cannotSaveYou });\n\n      return false;\n    }\n\n    return !!result?.data;\n  }\n\n  protected async showComeBackLaterAlert(text: string) {\n    const i18n = this.translateProvider.get(this.config.common.alert.comeBackLater);\n\n    i18n.message = text.replace(i18n.message, '').trim();\n\n    return this.alertService.show({ messages: i18n });\n  }\n\n  protected setCustomerCreditsError(data: CustomerCreditsEntity) {\n    this.creditInfoModel.customerCreditInfo = data;\n    const preapproved = data?.preapproved;\n\n    const creditUserInfo = this.customerFinancialService.creditUserInfo;\n\n    if (preapproved) {\n      this.customerFinancialService.updateCreditUser({\n        ...creditUserInfo,\n        hasPreapproved: true,\n        hasCredit: false,\n      });\n    }\n\n    this.nextRoute = this.data.redirectToPreapproved;\n  }\n\n  protected async onSarlaftLocksError() {\n    this.showCardModal({\n      i18nKey: this.config[this.data.moduleName].modal.youCantNow,\n    } as ModalParams);\n  }\n\n  protected async showUserDontHavePreapprovalModal(): Promise<boolean> {\n    const i18n = this.translateProvider.get(\n      this.config[this.data.moduleName].modal.dontHavePreapproved\n    );\n    const i18nFormatted = toCamelCaseProperties<Record<string, string>>(i18n);\n\n    await this.setAnalyticsIntentionOfApprovalUpFront();\n    const result = await this.fullscreenModalService.show<{ data: boolean }>({\n      title: i18nFormatted.title,\n      imgPath: i18nFormatted.image,\n      content: i18nFormatted.description,\n      cssClass: this.config.fullscreenModal.cssClass,\n      buttons: [\n        {\n          text: i18nFormatted.acceptButton,\n          handler: async () => {\n            const resultAttempt = await this.getApprovalUpFrontAttempt();\n\n            this.fullscreenModalService.hide(resultAttempt);\n\n            return true;\n          },\n          cssClass: this.config.fullscreenModal.cssClassButton,\n        },\n      ],\n      link: {\n        text: i18nFormatted.moreInfoLink,\n        url: this.config.routes.moreInfo,\n      },\n    });\n\n    return !!result?.data;\n  }\n\n  protected async failApprovalUpFrontAttempt(error): Promise<boolean> {\n    this.dynatraceService.setCustomError(error);\n\n    if (error?.data) {\n      this.setMaxAttemptApprovalFront(error.data);\n    }\n\n    if (this.approvalFrontException[error.constructor.name]) {\n      return this.approvalFrontException[error.constructor.name](error);\n    }\n\n    if (\n      error.constructor !== HaveApprovalAttemptException &&\n      error.constructor !== NeverBeenApprovedFrontException\n    ) {\n      await this.toastService.showError(error.message);\n\n      return false;\n    }\n  }\n\n  private setApprovalFrontException() {\n    this.approvalFrontException = {\n      [DontHaveApprovalAttemptWithDataException.name]: async (error): Promise<boolean> =>\n        this.onApprovalAttemptWithDataException(error),\n      [DontHaveApprovalAttemptException.name]: async (error): Promise<boolean> =>\n        this.processGetApprovalAttemptError(error),\n      [HaveApprovalAttemptException.name]: async (): Promise<boolean> => {\n        this.showCardModal({\n          i18nKey: this.config[this.data.moduleName].modal.lastApprovalAttempt,\n          onAccept: () => {\n            this.navController.navigateRoot(\n              this.config[this.data.moduleName].routes.knowUsBetterEngine\n            );\n          },\n          onCancel: () => false,\n        } as ModalParams);\n\n        return false;\n      },\n      [NeverBeenApprovedFrontException.name]: async (): Promise<boolean> => {\n        this.navController.navigateRoot(\n          this.config[this.data.moduleName].routes.knowUsBetterEngine\n        );\n\n        return false;\n      },\n    };\n  }\n\n  private async onValidateToRedirect(): Promise<boolean> {\n    if (await this.validateGetCustomerCredit()) {\n      this.navController.navigateForward(this.nextRoute);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  private async getApprovalUpFrontAttempt(): Promise<boolean> {\n    try {\n      await this.loadingService.show();\n      const response = await this.creditInteractor.getApprovalAttempt();\n\n      this.setMaxAttemptApprovalFront(response as GetApprovalAttemptEntity);\n\n      await this.loadingService.hideWithoutFeedback();\n\n      this.navController.navigateForward(\n        this.config[this.data.moduleName].routes.knowUsBetterEngine,\n        {\n          relativeTo: this.route,\n        }\n      );\n    } catch (error) {\n      await this.loadingService.hideWithoutFeedback();\n\n      return this.failApprovalUpFrontAttempt(error);\n    }\n  }\n\n  private setAnalyticsIntentionOfBegin() {\n    const eventName = this.config[this.data.moduleName].analytics.intentionOfBegin.name;\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.FACEBOOK,\n      params: {\n        eventName: eventName,\n      },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.FIREBASE,\n      params: { eventName: eventName },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.CLEVERTAP,\n      params: {\n        eventName: eventName,\n        eventProps: stringsArrayToObjectWithValues(\n          this.config[this.data.moduleName].analytics.intentionOfBegin.params.cleverTap,\n          [\n            getFormattedDateTimes(),\n            String(this.customerFinancialService.creditUserInfo?.hasPreapproved),\n          ]\n        ),\n      },\n    });\n  }\n\n  private async checkDeepLink() {\n    const analytics = this.router.getCurrentNavigation().extras.queryParams?.args?.analytics;\n\n    if (analytics) {\n      await this.onSaveAdditionalInfo(analytics);\n      this.setAnalyticsIntentionOfDeeplink(analytics);\n    }\n  }\n\n  private async onSaveAdditionalInfo(analytics: string) {\n    try {\n      const deeplinkInfo = this.config[this.data.moduleName].deeplink;\n\n      await this.creditInteractor.saveAdditionalInfo({\n        ...deeplinkInfo,\n        options: [\n          { ...deeplinkInfo.options.intention },\n          { key: deeplinkInfo.options.intentionDate, value: getFormattedDateTimes() },\n          { key: deeplinkInfo.options.origin, value: analytics },\n        ],\n      });\n    } catch (error) {\n      await this.toastService.showError(error.message);\n      this.dynatraceService.setCustomError(error);\n    }\n  }\n\n  private setAnalyticsIntentionOfDeeplink(analytics) {\n    const eventName = this.config[this.data.moduleName].analytics.intentionOfDeeplink.name;\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.CLEVERTAP,\n      params: {\n        eventName: eventName,\n        eventProps: stringsArrayToObjectWithValues(\n          this.config[this.data.moduleName].analytics.intentionOfDeeplink.params.cleverTap,\n          [getFormattedDateTimes(), this.userInfoProvider.getDocument().id, analytics]\n        ),\n      },\n    });\n  }\n\n  private getCreditInfo() {\n    if (this.data.moduleName === MiddlewareModuleName.PROPELLER) {\n      return this.creditInteractor.getPropeller();\n    }\n\n    if (this.data.moduleName === MiddlewareModuleName.PARACHUTE) {\n      return this.creditInteractor.getParachute();\n    }\n\n    if (this.data.moduleName === MiddlewareModuleName.LIFEGUARD_RECHARGED) {\n      return this.creditInteractor.getLifeguardRecharged();\n    }\n  }\n\n  private async setAnalyticsIntentionOfApprovalUpFront() {\n    const eventName = this.config[this.data.moduleName].analytics.intentionOfApprovalUpFront.name;\n\n    await this.dynatraceService.setAnalyticsOfEvent({\n      eventName: eventName,\n      leave: true,\n    });\n  }\n\n  private async setAnalyticsBeforeBegin() {\n    await this.dynatraceService.setAnalyticsOfEvent({\n      eventName: this.config[this.data.moduleName].analytics.intentionBeforeBegin.name,\n      eventProps: stringsArrayToObjectWithValues(\n        this.config[this.data.moduleName].analytics.intentionBeforeBegin.params.dynatrace,\n        this.config[this.data.moduleName].analytics.intentionBeforeBegin.value\n      ),\n    });\n  }\n\n  private async onApprovalAttemptWithDataException(error): Promise<boolean> {\n    this.approvalFrontViewModel.info.attempt.isCallService = false;\n    this.approvalFrontViewModel.info.isFromApproval = true;\n    this.approvalFrontViewModel.info.attempt.error = error;\n\n    if (Array.isArray(error.data?.installmentList) && error.data?.installmentList.length) {\n      this.approvalFrontViewModel.info.installmentList = error.data.installmentList;\n    }\n\n    return true;\n  }\n}\n"],"sourceRoot":"webpack:///"}
{"version":3,"sources":["./libs/features/open-banking/src/presentation/authorization/pages/home/home.config.ts","./libs/features/open-banking/src/presentation/authorization/pages/terms/terms.config.ts","./libs/features/open-banking/src/presentation/authorization/pages/home/home.page.ts","./libs/features/open-banking/src/presentation/authorization/pages/home/home.page.html","./libs/features/open-banking/src/presentation/authorization/pages/terms/terms.view-model.ts","./libs/features/open-banking/src/presentation/authorization/pages/permissions/permissions.page.ts","./libs/features/open-banking/src/presentation/authorization/pages/permissions/permissions.page.html","./libs/features/open-banking/src/presentation/authorization/pages/authorization-routing.module.ts","./libs/features/open-banking/src/presentation/authorization/pages/authorization.module.ts","./libs/features/open-banking/src/presentation/authorization/pages/terms/terms.page.ts","./libs/features/open-banking/src/presentation/authorization/pages/terms/terms.page.html","./libs/features/open-banking/src/presentation/authorization/services/authorization-card-modal.service.ts","./libs/features/open-banking/src/presentation/view-models/authorization-user.view-model.ts","./libs/features/open-banking/src/presentation/authorization/services/authorization.service.ts","./libs/features/open-banking/src/presentation/middlewares/authorization.middleware.ts","./libs/features/open-banking/src/presentation/authorization/pages/permissions/permissions.config.ts"],"names":[],"mappings":"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","file":"authorization-pages-authorization-module.js","sourcesContent":["export const HomeConfig = Object.freeze({\n  bottomSheet: {\n    cssClass: 'first-time-message--icon-authorization',\n    button: {\n      fill: 'outline',\n      color: 'guayaba',\n    },\n  },\n  routes: {\n    closet: '/admin/closet/',\n    authorizationTerms: '/admin/open-banking/authorization/terms',\n  },\n});\n","export const TermsConfig = Object.freeze({\n  i18n: {\n    alerts: {\n      error: 'open-banking.alerts.error',\n    },\n  },\n  routes: {\n    closet: '/admin/closet/',\n    authorizationPermissions: '/admin/open-banking/authorization/permissions',\n  },\n});\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { FeatureBasePage } from '@nequi/features/commons/presentation';\nimport { LoadingService } from '@nequi/ui';\n\nimport { AuthorizationUserViewModel } from '../../../view-models/authorization-user.view-model';\nimport { AuthorizationCardModalService } from '../../services/authorization-card-modal.service';\nimport { HomeConfig } from './home.config';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage extends FeatureBasePage implements OnInit {\n  constructor(\n    injector: Injector,\n    public authorizationUserViewModel: AuthorizationUserViewModel,\n    private authorizationCardModalService: AuthorizationCardModalService,\n    private loadingService: LoadingService,\n    private translateProvider: TranslateProvider,\n    private moduleConfigProvider: ModuleConfigProvider\n  ) {\n    super(injector);\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public ngOnInit() {\n    if (!this.authorizationUserViewModel.shouldShowInformation) {\n      this.validateApp();\n    }\n  }\n\n  public goBack() {\n    this.navController.navigateForward(HomeConfig.routes.closet);\n  }\n\n  public async validateApp() {\n    await this.loadingService.show();\n    const shouldOpenApp = await this.authorizationCardModalService.openApp();\n\n    if (shouldOpenApp) {\n      await this.authorizationCardModalService.goToApp();\n      await this.loadingService.hideWithoutFeedback();\n      this.navController.navigateForward(HomeConfig.routes.closet);\n    } else {\n      if (this.authorizationUserViewModel.shouldShowTerms) {\n        await this.loadingService.hideWithoutFeedback();\n        this.navController.navigateForward(HomeConfig.routes.authorizationTerms);\n      } else {\n        await this.loadingService.hide(false);\n      }\n    }\n  }\n}\n","<ion-header class=\"nequi-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button id=\"authorization_go-back_button\" (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-content--enroll ion-padding-horizontal content\" fullscreen=\"true\">\n  <ion-text class=\"nequi-title content__title\"> {{ authorizationUserViewModel.appName }} </ion-text>\n\n  <ion-list>\n    <ng-container *ngFor=\"let item of authorizationUserViewModel.informationScreen let i = index\">\n      <ion-row class=\"ion-margin-bottom ion-border-bottom\">\n        <ion-col class=\"ion-padding-bottom\">\n          <ion-item lines=\"none\" class=\"ion-no-margin ion-no-padding info-list__item\">\n            <ion-label class=\"ion-no-margin info-list__title margin-bottom-16\"\n              >{{ item.title | translate }}</ion-label\n            >\n          </ion-item>\n          <ion-item lines=\"none\" class=\"ion-no-margin ion-no-padding info-list__item\">\n            <ion-text\n              class=\"ion-no-margin info-list__content\"\n              [innerHtml]=\"(item.content | translate) | trustHTML\"\n            >\n            </ion-text>\n          </ion-item>\n        </ion-col>\n      </ion-row>\n    </ng-container>\n  </ion-list>\n</ion-content>\n\n<ion-footer [hidden]=\"!authorizationUserViewModel.shouldShowInformation\" class=\"nequi-footer\">\n  <ion-toolbar>\n    <ion-button\n      id=\"authorization_go-to-terms_button\"\n      class=\"nequi-footer__button\"\n      shape=\"round\"\n      color=\"guayaba\"\n      expand=\"block\"\n      type=\"submit\"\n      (click)=\"validateApp()\"\n    >\n      <ion-text>{{ 'open-banking.authorization.information.button' | translate }}</ion-text>\n    </ion-button>\n  </ion-toolbar>\n</ion-footer>\n","import { FormControl, Validators } from '@angular/forms';\n\nexport class TermsViewModel {\n  public terms: string;\n  private acceptTerms: FormControl;\n\n  public initControl() {\n    this.acceptTerms = new FormControl(false, [Validators.required, Validators.requiredTrue]);\n  }\n\n  public get termsControl() {\n    return this.acceptTerms;\n  }\n}\n","import { Component, Injector } from '@angular/core';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { FeatureBasePage } from '@nequi/features/commons/presentation';\nimport { LoadingService } from '@nequi/ui';\n\nimport { AuthorizationUserViewModel } from '../../../view-models/authorization-user.view-model';\nimport { AuthorizationCardModalService } from '../../services/authorization-card-modal.service';\nimport { PermissionsConfig } from './permissions.config';\n\n@Component({\n  selector: 'app-permissions',\n  templateUrl: './permissions.page.html',\n  styleUrls: ['./permissions.page.scss'],\n})\nexport class PermissionsPage extends FeatureBasePage {\n  constructor(\n    injector: Injector,\n    public authorizationUserViewModel: AuthorizationUserViewModel,\n    private authorizationCardModalService: AuthorizationCardModalService,\n    private loadingService: LoadingService,\n    private translateProvider: TranslateProvider,\n    private moduleConfigProvider: ModuleConfigProvider\n  ) {\n    super(injector);\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public goBack() {\n    this.navController.navigateForward(PermissionsConfig.routes.closet);\n  }\n\n  public async validateApp() {\n    await this.loadingService.show();\n    await this.authorizationCardModalService.goToApp();\n    await this.loadingService.hideWithoutFeedback();\n    this.navController.navigateForward(PermissionsConfig.routes.closet);\n  }\n}\n","<ion-header class=\"nequi-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button id=\"authorization-permissions_go-back_button\" (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content\n  class=\"ion-content--enroll ion-padding-horizontal content data-content\"\n  fullscreen=\"true\"\n>\n  <ion-text class=\"nequi-title content__title\">\n    {{ authorizationUserViewModel.permissionsTitle }}\n  </ion-text>\n  <app-item-detail\n    *ngIf=\"authorizationUserViewModel.appName\"\n    [icon]=\"'open-banking.authorization.resume.icon' | translate\"\n    [title]=\"'open-banking.authorization.resume.message' | translate\"\n    [line]=\"false\"\n  >\n  </app-item-detail>\n\n  <p\n    class=\"data-content__authorization-permissions\"\n    [innerHTML]=\"authorizationUserViewModel.permissionsDatos | trustHTML\"\n  ></p>\n\n  <ion-list class=\"list\">\n    <ul *ngFor=\"let item of authorizationUserViewModel.permissions\" class=\"list__item\" lines=\"none\">\n      <li\n        class=\"list__item-label\"\n        id=\"profile-terms_content_label\"\n        [innerHTML]=\"item.data.label | trustHTML\"\n      ></li>\n    </ul>\n  </ion-list>\n\n  <p\n    class=\"data-content__authorization-copy\"\n    [innerHTML]=\"authorizationUserViewModel.permissionsCopy | trustHTML\"\n  ></p>\n</ion-content>\n\n<ion-footer class=\"nequi-footer\">\n  <ion-toolbar>\n    <ion-button\n      id=\"authorization_go-to-app_button\"\n      class=\"nequi-footer__button\"\n      shape=\"round\"\n      color=\"guayaba\"\n      expand=\"block\"\n      type=\"submit\"\n      (click)=\"validateApp()\"\n    >\n      <ion-text>{{ 'open-banking.authorization.resume.button' | translate }}</ion-text>\n    </ion-button>\n  </ion-toolbar>\n</ion-footer>\n","import { Injectable, NgModule, Type } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n  RouterModule,\n  RouterStateSnapshot,\n  Routes,\n  UrlTree\n} from '@angular/router';\n\nimport { OpenBankingConfig } from '../../../config/open-banking.config';\nimport { AuthorizationMiddleware } from '../../middlewares/authorization.middleware';\nimport { HomePage } from './home/home.page';\nimport { PermissionsPage } from './permissions/permissions.page';\nimport { TermsPage } from './terms/terms.page';\n\n@Injectable()\nexport class MapParamsToApp implements CanActivate {\n  constructor(private router: Router) {}\n\n  public async canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Promise<UrlTree> {\n    let app = this.router.getCurrentNavigation().extras.state?.params?.app;\n\n    if (!app) {\n      app = (this.router.getCurrentNavigation().extras.queryParams?.args?.app)\n        || this.router.getCurrentNavigation().extras.state?.app;\n    }\n\n    return this.router.parseUrl(`${state.url.replace(/\\?.+/, '')}/${app}`);\n  }\n}\n\nconst routes: Routes = [\n  {\n    path: 'info',\n    component: Type,\n    canActivate: [MapParamsToApp],\n  },\n  {\n    path: 'info/:app',\n    component: HomePage,\n    data: {\n      i18nModuleKey: OpenBankingConfig.i18n.moduleKey,\n    },\n    canActivate: [AuthorizationMiddleware],\n  },\n  {\n    path: 'terms',\n    component: TermsPage,\n  },\n  {\n    path: 'permissions',\n    component: PermissionsPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AuthorizationRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport {\n  ApplicationRepository,\n  AuthorizationInteractor,\n  AuthorizationRepository\n} from '@nequi/features/open-banking/core';\nimport { NequiUiModule } from '@nequi/ui';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { ApplicationInteractor } from '../../../core/application.interactor';\nimport { AuthorizationMiddleware } from '../../middlewares/authorization.middleware';\nimport { AuthorizationUserViewModel } from '../../view-models/authorization-user.view-model';\nimport { AuthorizationCardModalService } from '../services/authorization-card-modal.service';\nimport { AuthorizationService } from '../services/authorization.service';\nimport { AuthorizationRoutingModule, MapParamsToApp } from './authorization-routing.module';\nimport { HomePage } from './home/home.page';\nimport { PermissionsPage } from './permissions/permissions.page';\nimport { TermsPage } from './terms/terms.page';\n\n@NgModule({\n  declarations: [HomePage, TermsPage, PermissionsPage],\n  imports: [\n    CommonModule,\n    IonicModule,\n    TranslateModule,\n    FormsModule,\n    ReactiveFormsModule,\n    AuthorizationRoutingModule,\n    NequiUiModule,\n  ],\n  providers: [\n    AuthorizationMiddleware,\n    AuthorizationUserViewModel,\n    AuthorizationCardModalService,\n    AuthorizationService,\n    MapParamsToApp,\n    {\n      provide: AuthorizationInteractor,\n      deps: [AuthorizationRepository],\n      useFactory: (repository: AuthorizationRepository) => new AuthorizationInteractor(repository),\n    },\n    {\n      provide: ApplicationInteractor,\n      deps: [ApplicationRepository],\n      useFactory: (repository: ApplicationRepository) => new ApplicationInteractor(repository),\n    },\n  ],\n})\nexport class AuthorizationModule {}\n","import { ManageAuthorizationParams } from 'libs/features/open-banking/src/core';\n\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { AlertService, FeatureBasePage } from '@nequi/features/commons/presentation';\nimport { LoadingService } from '@nequi/ui';\n\nimport { AuthorizationUserViewModel } from '../../../view-models/authorization-user.view-model';\nimport { AuthorizationService } from '../../services/authorization.service';\nimport { TermsConfig } from './terms.config';\nimport { TermsViewModel } from './terms.view-model';\n\n@Component({\n  selector: 'app-terms',\n  templateUrl: './terms.page.html',\n  styleUrls: ['./terms.page.scss'],\n})\nexport class TermsPage extends FeatureBasePage implements OnInit {\n  public viewModel = new TermsViewModel();\n\n  constructor(\n    injector: Injector,\n    private alertService: AlertService,\n    public authorizationUserViewModel: AuthorizationUserViewModel,\n    private authorizationService: AuthorizationService,\n    private loadingService: LoadingService,\n    private translateProvider: TranslateProvider,\n    private moduleConfigProvider: ModuleConfigProvider\n  ) {\n    super(injector);\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public ngOnInit() {\n    this.viewModel.initControl();\n    this.viewModel.terms = this.authorizationUserViewModel.contract;\n  }\n\n  public goBack() {\n    this.navController.navigateForward(TermsConfig.routes.closet);\n  }\n\n  public async acceptContract() {\n    await this.loadingService.show();\n\n    const params: ManageAuthorizationParams = {\n      app: this.authorizationUserViewModel.app,\n      acceptContractMail: this.authorizationUserViewModel.acceptContractMail,\n      permissions: this.authorizationUserViewModel.permissions,\n    };\n\n    const hasAcceptTerms = await this.authorizationService.acceptTerms(params);\n\n    if (hasAcceptTerms) {\n      await this.loadingService.hide(true);\n      this.authorizationUserViewModel.shouldShowTerms = false;\n      this.navController.navigateForward(TermsConfig.routes.authorizationPermissions);\n    } else {\n      const alert = this.translateProvider.get(TermsConfig.i18n.alerts.error);\n\n      this.alertService.show({\n        messages: {\n          header: alert.title,\n          message: alert.message,\n          buttons: {\n            accept: alert.button,\n          },\n        },\n        handlers: {\n          accept: () => {},\n        },\n      });\n\n      await this.loadingService.hide(false);\n    }\n  }\n}\n","<ion-header class=\"nequi-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button id=\"autorization-terms_go-back_button\" (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-content--enroll ion-padding-horizontal content\" fullscreen=\"true\">\n  <ion-text class=\"nequi-title content__title\">\n    {{ 'open-banking.authorization.terms.title' | translate }}\n  </ion-text>\n\n  <p [innerHTML]=\"viewModel.terms | trustHTML\"></p>\n</ion-content>\n\n<ion-footer class=\"nequi-footer\">\n  <ion-toolbar class=\"nequi-footer__toolbar\">\n    <ion-item lines=\"none\" class=\"footer__accept-agreement\">\n      <ion-checkbox\n        slot=\"start\"\n        id=\"terms_accept-agreement_checkbox\"\n        class=\"footer__accept-agreement_checkbox\"\n        [formControl]=\"viewModel.termsControl\"\n      ></ion-checkbox>\n      <ion-text id=\"terms_accept-agreement_label\">\n        {{ 'open-banking.authorization.terms.accept-terms' | translate }}\n      </ion-text>\n    </ion-item>\n\n    <ion-button\n      id=\"terms_accept-agreement_button\"\n      class=\"nequi-footer__button\"\n      shape=\"round\"\n      color=\"guayaba\"\n      expand=\"block\"\n      [disabled]=\"viewModel.termsControl.invalid\"\n      (click)=\"acceptContract()\"\n    >\n      {{ 'open-banking.authorization.terms.button' | translate }}\n    </ion-button>\n  </ion-toolbar>\n</ion-footer>\n","import { LoggerInteractor } from 'libs/features/commons/src/core';\n\nimport { Injectable } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { AnalyticsInteractor } from '@nequi/features/commons/core';\nimport {\n  OpenAppParams,\n  ScreenConfig,\n  TagsConfig,\n  TagValuesToReplace\n} from '@nequi/features/open-banking/core';\nimport { NequiWebView } from '@nequi/native/nequi-web-view';\nimport { CardModalService } from '@nequi/ui';\nimport { getFormattedDateTimes } from '@nequi/utils/date';\nimport { openUrl, stringsArrayToObjectWithValues } from '@nequi/utils/functions';\nimport { createFormat } from '@nequi/utils/string';\n\nimport { AuthorizationUserViewModel } from '../../view-models/authorization-user.view-model';\nimport { AuthorizationService } from './authorization.service';\n\n@Injectable()\nexport class AuthorizationCardModalService {\n  constructor(\n    public authorizationUserViewModel: AuthorizationUserViewModel,\n    private authorizationService: AuthorizationService,\n    private cardModalService: CardModalService,\n    private loggerInteractor: LoggerInteractor,\n    private translateProvider: TranslateProvider,\n    private navController: NavController,\n    private nequiWebView: NequiWebView,\n    private moduleConfigProvider: ModuleConfigProvider,\n    private analyticsInteractor: AnalyticsInteractor\n  ) {\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public async goToApp() {\n    const messages = this.authorizationUserViewModel.reward;\n\n    if (this.authorizationUserViewModel.intentionTags) {\n      await this.setAnalyticsFinalIntention(\n        this.authorizationUserViewModel.intentionTags[TagsConfig.FINAL_INTENTION]\n      );\n    }\n\n    if (\n      !this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].enable ||\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].counter === 0\n    ) {\n      await this.openUrlApp();\n\n      return false;\n    }\n\n    if (\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].counter &&\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].counter !== 0\n    ) {\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].counter =\n        this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].counter - 1;\n\n      this.authorizationUserViewModel.saveScreenConfig(\n        this.authorizationUserViewModel.checkInfoSaved,\n        this.authorizationUserViewModel.appName\n      );\n    }\n\n    this.cardModalService.show({\n      imgPath: messages.imgPath,\n      title: createFormat(messages.title, [this.authorizationUserViewModel.appName]),\n      content: createFormat(messages.content, [this.authorizationUserViewModel.appName]),\n      buttons: [\n        {\n          text: messages.buttons.next,\n          handler: async () => {\n            if (this.authorizationUserViewModel.isAppValidated) {\n              await this.openUrlApp();\n            } else {\n              const isApp = await this.openApp();\n\n              if (isApp) {\n                await this.openUrlApp();\n              }\n            }\n          },\n        },\n        {\n          text: messages.buttons.back,\n          color: 'medianoche',\n        },\n      ],\n    });\n  }\n\n  public async openApp() {\n    const params: OpenAppParams = {\n      app: this.authorizationUserViewModel.app,\n    };\n\n    return this.authorizationService.openApp(params);\n  }\n\n  private async openUrlApp() {\n    const url = `${this.authorizationUserViewModel.url}?token=${this.authorizationUserViewModel.token}`;\n\n    switch (this.authorizationUserViewModel.action) {\n      case 'WEBVIEW':\n        await this.openWebView(url);\n        break;\n      case 'NAVIGATOR':\n        await this.openNavigator(url);\n        break;\n      case 'DEEPLINK':\n        this.navController.navigateForward(url);\n        break;\n      default:\n        await this.openWebView(url);\n        break;\n    }\n  }\n\n  private async openWebView(url: string) {\n    try {\n      await this.nequiWebView.launchWebView({\n        url: url,\n        title: this.authorizationUserViewModel.appName,\n        loadLabel: this.authorizationUserViewModel.appName,\n        headers: this.authorizationUserViewModel.headers,\n      });\n    } catch (err) {\n      this.loggerInteractor.error(`[Authorization][webview] ${JSON.stringify(err)}`);\n    }\n  }\n\n  private async openNavigator(url: string) {\n    await openUrl(url);\n  }\n\n  private setAnalyticsFinalIntention(configTag) {\n    const currentDate = getFormattedDateTimes();\n\n    for (const valuesToReplace of configTag.clevertap.params.eventProps) {\n      if (valuesToReplace.value === TagValuesToReplace.CURRENT_DATE) {\n        configTag.clevertap.params.eventProps[0].value = currentDate;\n      }\n\n      if (valuesToReplace.value === TagValuesToReplace.COMMERCE) {\n        configTag.clevertap.params.eventProps[1].value = this.authorizationUserViewModel.appName;\n      }\n    }\n\n    const property = [];\n    const valueProperty = [];\n    const paramsLength = configTag.clevertap.params.eventProps.length;\n\n    for (let i = 0; i < paramsLength; i++) {\n      property.push(configTag.clevertap.params.eventProps[i].label);\n      valueProperty.push(configTag.clevertap.params.eventProps[i].value);\n    }\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.facebook.type,\n      params: {\n        eventName: configTag.facebook.params.eventName,\n      },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.firebase.type,\n      params: {\n        eventName: configTag.firebase.params.eventName,\n      },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.clevertap.type,\n      params: {\n        eventName: configTag.clevertap.params.eventName,\n        eventProps: stringsArrayToObjectWithValues(property, valueProperty),\n      },\n    });\n  }\n}\n","/* eslint-disable complexity */\nimport { Injectable } from '@angular/core';\nimport { ApplicationDataInteractor } from '@nequi/features/application-data/core';\nimport { AnalyticsType } from '@nequi/features/commons/core';\nimport {\n  ContractValidation,\n  DynamicTagResponse,\n  DynamicTags,\n  GetAppEntity,\n  Headers,\n  Information,\n  OpenAppEntity,\n  Permission,\n  ScreenConfig,\n  TagsConfig,\n  ViewsOptions\n} from '@nequi/features/open-banking/core';\n\nimport { OpenBankingConfig } from '../../config/open-banking.config';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthorizationUserViewModel {\n  public acceptContractMail = true;\n  public app: string;\n  public appName: string;\n  public contract: string;\n  public contractValidation: string;\n  public informationScreen: Information[];\n  public showViews: ViewsOptions;\n  public modal: {\n    buttonLabel: string;\n    description: string;\n    image: string;\n    url?: {\n      label: string;\n      link: string;\n    };\n    title: string;\n  };\n\n  public permissions: Permission[];\n  public permissionsCopy: string;\n  public permissionsDatos: string;\n  public permissionsTitle: string;\n  public reward: {\n    buttons: {\n      back: string;\n      next: string;\n    };\n    content: string;\n    imgPath: string;\n    title: string;\n  };\n\n  public shouldShowInformation: boolean;\n  public shouldShowTerms: boolean;\n  public action: string;\n  public url: string;\n  public headers: Headers[];\n  public token: string;\n  public isAppValidated = false;\n  public checkInfoSaved: object;\n  public intentionTags: DynamicTagResponse;\n  constructor(private applicationDataInteractor: ApplicationDataInteractor) {}\n\n  public async fromGetAppEntity(entity: GetAppEntity) {\n    this.app = entity.assets?.app;\n    this.appName = entity.assets?.appName;\n    this.contract = entity.contract?.text;\n    this.contractValidation = entity.contract?.contractValidation;\n    this.informationScreen = entity.assets?.informationScreen;\n    this.showViews = await this.getScreenConfig(\n      entity.assets?.appName,\n      entity.assets?.showViews,\n      entity\n    );\n\n    this.intentionTags = entity.assets?.tags\n      ? await this.getDynamicTags(entity.assets?.tags)\n      : await this.setDynamicTag();\n\n    if (!this.checkInfoSaved) {\n      this.checkInfoSaved = this.showViews;\n    }\n\n    switch (Object.values(this.showViews).length > 0) {\n      case this.showViews[ScreenConfig.MODAL].version !==\n        this.checkInfoSaved[ScreenConfig.MODAL].version:\n        this.saveScreenConfig(this.showViews, this.appName);\n        break;\n\n      case this.showViews[ScreenConfig.AUTHORIZATION].version !==\n        this.checkInfoSaved[ScreenConfig.AUTHORIZATION].version:\n        this.saveScreenConfig(this.showViews, this.appName);\n        break;\n\n      case this.showViews[ScreenConfig.INFORMATION_SCREEN].version !==\n        this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].version:\n        this.saveScreenConfig(this.showViews, this.appName);\n        break;\n\n      case this.showViews[ScreenConfig.BEFORE_GOTO_APP].version !==\n        this.checkInfoSaved[ScreenConfig.BEFORE_GOTO_APP].version:\n        this.saveScreenConfig(this.showViews, this.appName);\n        break;\n\n      default:\n        break;\n    }\n\n    if (\n      (this.informationScreen &&\n        this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].enable &&\n        this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].counter !== 0) ||\n      this.contractValidation === ContractValidation.NO\n    ) {\n      this.shouldShowInformation = true;\n\n      if (this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].counter) {\n        this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].counter =\n          this.checkInfoSaved[ScreenConfig.INFORMATION_SCREEN].counter - 1;\n\n        this.saveScreenConfig(this.checkInfoSaved, entity.assets?.appName);\n      }\n    } else {\n      this.shouldShowInformation = false;\n    }\n\n    if (entity.assets?.modal) {\n      this.modal = {\n        buttonLabel: entity.assets.modal.buttonLabel,\n        description: entity.assets.modal.description,\n        image: entity.assets.modal.image,\n        url: entity.assets.modal.url,\n        title: entity.assets.modal.title,\n      };\n    }\n\n    this.permissions = entity.permissions?.permissions;\n    this.permissionsCopy = entity.assets?.authorization?.copy;\n    this.permissionsDatos = entity.assets?.authorization?.permissions;\n    this.permissionsTitle = entity.assets?.authorization?.title;\n    this.isAppValidated = false;\n\n    if (entity.assets?.beforeGoToApp) {\n      this.reward = {\n        buttons: {\n          back: entity.assets.beforeGoToApp.buttons.back,\n          next: entity.assets.beforeGoToApp.buttons.next,\n        },\n        content: entity.assets.beforeGoToApp.description,\n        imgPath: entity.assets.beforeGoToApp.image,\n        title: entity.assets.beforeGoToApp.title,\n      };\n    }\n  }\n\n  public fromOpenAppEntity(entity: OpenAppEntity) {\n    this.action = entity.action;\n    this.url = entity.url;\n    this.headers = entity.headers;\n    this.token = entity.token;\n  }\n\n  public async getScreenConfig(commerce: string, showViews: ViewsOptions, entity: GetAppEntity) {\n    this.checkInfoSaved = await this.applicationDataInteractor.findValue<object>(\n      OpenBankingConfig.applicationData.persistenceDataKey + commerce\n    );\n\n    if (!this.checkInfoSaved && showViews) {\n      this.saveScreenConfig(showViews, commerce);\n    }\n\n    if (showViews) {\n      return showViews;\n    }\n\n    return {\n      [ScreenConfig.MODAL]: {\n        version: 1,\n        enable: Object.prototype.hasOwnProperty.call(entity?.assets, 'modal'),\n      },\n      [ScreenConfig.INFORMATION_SCREEN]: {\n        version: 1,\n        enable: Object.prototype.hasOwnProperty.call(entity?.assets, 'informationScreen'),\n      },\n      [ScreenConfig.BEFORE_GOTO_APP]: {\n        version: 1,\n        enable: Object.prototype.hasOwnProperty.call(entity?.assets, 'beforeGoToApp'),\n      },\n      [ScreenConfig.AUTHORIZATION]: {\n        version: 1,\n        enable: Object.prototype.hasOwnProperty.call(entity?.assets, 'authorization'),\n      },\n    } as ViewsOptions;\n  }\n\n  public saveScreenConfig(screenData, commerce) {\n    if (this.checkInfoSaved) {\n      for (const items in this.showViews) {\n        if (this.showViews[items]?.version !== this.checkInfoSaved[items]?.version) {\n          this.checkInfoSaved[items] = this.showViews[items];\n        }\n      }\n    }\n\n    this.applicationDataInteractor.save(\n      OpenBankingConfig.applicationData.persistenceDataKey + commerce,\n      screenData\n    );\n  }\n\n  private getDynamicTagsParams(items) {\n    return {\n      value: items.value,\n      label: items.label,\n    };\n  }\n\n  private getDynamicTags(tags: DynamicTags) {\n    if (\n      Object.prototype.hasOwnProperty.call(tags, TagsConfig.INITIAL_INTENTION) &&\n      Object.prototype.hasOwnProperty.call(tags, TagsConfig.FINAL_INTENTION)\n    ) {\n      const eventInitialIntenttion = tags[TagsConfig.INITIAL_INTENTION];\n      const eventFinalIntenttion = tags[TagsConfig.FINAL_INTENTION];\n\n      return {\n        [TagsConfig.INITIAL_INTENTION]: {\n          name: eventInitialIntenttion.name,\n          firebase: {\n            type: AnalyticsType.FIREBASE,\n            params: {\n              eventName: eventInitialIntenttion.firebase || eventInitialIntenttion.name,\n            },\n          },\n          facebook: {\n            type: AnalyticsType.FACEBOOK,\n            params: {\n              eventName: eventInitialIntenttion.facebook || eventInitialIntenttion.name,\n            },\n          },\n          clevertap: {\n            type: AnalyticsType.CLEVERTAP,\n            params: {\n              eventName: eventInitialIntenttion.clevertap || eventInitialIntenttion.name,\n              eventProps: eventInitialIntenttion.params.map((items) =>\n                this.getDynamicTagsParams(items)\n              ),\n            },\n          },\n        },\n        [TagsConfig.FINAL_INTENTION]: {\n          name: eventFinalIntenttion.name,\n          firebase: {\n            type: AnalyticsType.FIREBASE,\n            params: {\n              eventName: eventFinalIntenttion.firebase || eventFinalIntenttion.name,\n            },\n          },\n          facebook: {\n            type: AnalyticsType.FACEBOOK,\n            params: {\n              eventName: eventFinalIntenttion.facebook || eventFinalIntenttion.name,\n            },\n          },\n          clevertap: {\n            type: AnalyticsType.CLEVERTAP,\n            params: {\n              eventName: eventFinalIntenttion.clevertap || eventFinalIntenttion.name,\n              eventProps: eventFinalIntenttion.params.map((items) =>\n                this.getDynamicTagsParams(items)\n              ),\n            },\n          },\n        },\n      };\n    }\n  }\n\n  private setDynamicTag() {\n    return {\n      initialIntention: {\n        name: 'EE_intencion1_servicio',\n        firebase: {\n          type: AnalyticsType.FIREBASE,\n          params: {\n            eventName: 'EE_intencion1_servicio',\n          },\n        },\n        facebook: {\n          type: AnalyticsType.FACEBOOK,\n          params: {\n            eventName: 'EE_intencion1_servicio',\n          },\n        },\n        clevertap: {\n          type: AnalyticsType.CLEVERTAP,\n          params: {\n            eventName: 'EE_intencion1_servicio',\n            eventProps: [\n              {\n                value: 'CURRENT_DATE',\n                label: 'Fecha_intencion1',\n              },\n              {\n                value: 'COMMERCE',\n                label: 'Comercio',\n              },\n            ],\n          },\n        },\n      },\n      finalIntention: {\n        name: 'EE_intencion2_servicio',\n        firebase: {\n          type: AnalyticsType.FIREBASE,\n          params: {\n            eventName: 'EE_intencion2_servicio',\n          },\n        },\n        facebook: {\n          type: AnalyticsType.FACEBOOK,\n          params: {\n            eventName: 'EE_intencion2_servicio',\n          },\n        },\n        clevertap: {\n          type: AnalyticsType.CLEVERTAP,\n          params: {\n            eventName: 'EE_intencion2_servicio',\n            eventProps: [\n              {\n                value: 'CURRENT_DATE',\n                label: 'Fecha_intencion2',\n              },\n              {\n                value: 'COMMERCE',\n                label: 'Comercio',\n              },\n            ],\n          },\n        },\n      },\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TranslateProvider } from '@nequi/features/commons';\nimport { AlertService } from '@nequi/features/commons/presentation';\nimport {\n  ApplicationInteractor,\n  AuthorizationInteractor,\n  ErrorCode,\n  ManageAuthorizationParams,\n  OpenAppParams\n} from '@nequi/features/open-banking/core';\nimport { createFormat } from '@nequi/utils/string';\n\nimport { AuthorizationUserViewModel } from '../../view-models/authorization-user.view-model';\nimport { PermissionsConfig } from '../pages/permissions/permissions.config';\n\n@Injectable()\nexport class AuthorizationService {\n  constructor(\n    private alertService: AlertService,\n    private authorizationInteractor: AuthorizationInteractor,\n    private applicationInteractor: ApplicationInteractor,\n    private authorizationUserViewModel: AuthorizationUserViewModel,\n    private translateProvider: TranslateProvider\n  ) {}\n\n  public async openApp(params: OpenAppParams) {\n    try {\n      const openAppEntity = await this.applicationInteractor.openApp(params);\n\n      this.authorizationUserViewModel.fromOpenAppEntity(openAppEntity);\n      this.authorizationUserViewModel.isAppValidated = true;\n\n      return true;\n    } catch (error) {\n      return this.processError(error);\n    }\n  }\n\n  public async acceptTerms(params: ManageAuthorizationParams) {\n    try {\n      await this.authorizationInteractor.authorized(params);\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  private async processError(error) {\n    if (error.errorId === ErrorCode.DATA_NOT_VALID_STATUS) {\n      if (error.errorMessage === ErrorCode.PENDING_ACCEPT_CONTRACT) {\n        this.authorizationUserViewModel.shouldShowTerms = true;\n      }\n\n      return false;\n    }\n\n    const alert = this.translateProvider.get(PermissionsConfig.i18n.alerts.unavailableService);\n\n    this.alertService.show({\n      messages: {\n        header: alert.title,\n        message: createFormat(alert.message, [this.authorizationUserViewModel.appName]),\n        buttons: {\n          accept: alert.button,\n        },\n      },\n      handlers: {\n        accept: () => {},\n      },\n    });\n\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { AnalyticsInteractor } from '@nequi/features/commons/core';\nimport { TranslateProvider } from '@nequi/features/commons/providers';\nimport {\n  ApplicationInteractor,\n  ContractValidation,\n  GetAppParams,\n  ScreenConfig,\n  TagValuesToReplace,\n  ToReturn\n} from '@nequi/features/open-banking/core';\nimport { FirstTimeMessageBottomSheetService, LoadingService } from '@nequi/ui';\nimport { getFormattedDateTimes } from '@nequi/utils/date';\nimport { stringsArrayToObjectWithValues } from '@nequi/utils/functions';\n\nimport { TagsConfig } from '../../core/constans/tags';\nimport { HomeConfig } from '../authorization/pages/home/home.config';\nimport {\n  AuthorizationCardModalService\n} from '../authorization/services/authorization-card-modal.service';\nimport { AuthorizationUserViewModel } from '../view-models/authorization-user.view-model';\n\n@Injectable()\nexport class AuthorizationMiddleware implements CanActivate {\n  constructor(\n    private navController: NavController,\n    private applicationInteractor: ApplicationInteractor,\n    private authorizationUserViewModel: AuthorizationUserViewModel,\n    private loadingService: LoadingService,\n    private translateProvider: TranslateProvider,\n    private firstTimeMessageBottomSheetService: FirstTimeMessageBottomSheetService,\n    private authorizationCardModalService: AuthorizationCardModalService,\n    private analyticsInteractor: AnalyticsInteractor\n  ) {}\n\n  public async canActivate(\n    route: ActivatedRouteSnapshot,\n    _state: RouterStateSnapshot\n  ): Promise<boolean | UrlTree> {\n    this.translateProvider.loadModule(route.data.i18nModuleKey);\n\n    const app = route.paramMap.get('app');\n\n    if (app) {\n      const params: GetAppParams = {\n        app: app,\n        toReturn: ToReturn,\n      };\n\n      const isGetApp = await this.getApp(params);\n\n      if (\n        isGetApp &&\n        this.authorizationUserViewModel.contractValidation === ContractValidation.YES\n      ) {\n        await this.showBottomSheet();\n\n        return true;\n      }\n\n      this.openApp();\n    }\n\n    return false;\n  }\n\n  public async getApp(params: GetAppParams) {\n    try {\n      await this.loadingService.show();\n\n      const getAppEntity = await this.applicationInteractor.getApp(params);\n\n      await this.authorizationUserViewModel.fromGetAppEntity(getAppEntity);\n      await this.loadingService.hideWithoutFeedback();\n\n      return true;\n    } catch (error) {\n      await this.loadingService.hideWithoutFeedback();\n\n      return false;\n    }\n  }\n\n  private async openApp() {\n    await this.loadingService.show();\n    await this.authorizationCardModalService.goToApp();\n    await this.loadingService.hideWithoutFeedback();\n  }\n\n  private async showBottomSheet() {\n    if (this.authorizationUserViewModel.intentionTags) {\n      await this.setAnalyticsInitialIntention(\n        this.authorizationUserViewModel.intentionTags[TagsConfig.INITIAL_INTENTION]\n      );\n    }\n\n    if (\n      !this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].enable ||\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].counter === 0\n    ) {\n      return false;\n    }\n\n    if (\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].counter &&\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].counter !== 0\n    ) {\n      this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].counter =\n        this.authorizationUserViewModel.checkInfoSaved[ScreenConfig.MODAL].counter - 1;\n\n      this.authorizationUserViewModel.saveScreenConfig(\n        this.authorizationUserViewModel.checkInfoSaved,\n        this.authorizationUserViewModel.appName\n      );\n    }\n\n    await this.firstTimeMessageBottomSheetService.show({\n      icon: this.authorizationUserViewModel.modal.image,\n      message: this.authorizationUserViewModel.modal.title,\n      content: this.authorizationUserViewModel.modal.description,\n      cssClass: HomeConfig.bottomSheet.cssClass,\n      url: this.authorizationUserViewModel.modal.url\n        ? this.authorizationUserViewModel.modal.url\n        : null,\n      button: {\n        label: this.authorizationUserViewModel.modal.buttonLabel,\n        fill: HomeConfig.bottomSheet.button.fill,\n        color: HomeConfig.bottomSheet.button.color,\n        action: async () => {\n          this.firstTimeMessageBottomSheetService.hide({ seen: true });\n        },\n      },\n      header: {\n        view: true,\n        action: async () => {\n          this.firstTimeMessageBottomSheetService.hide({ seen: true });\n          this.navController.navigateForward(HomeConfig.routes.closet);\n        },\n      },\n    });\n  }\n\n  private setAnalyticsInitialIntention(configTag) {\n    const currentDate = getFormattedDateTimes();\n\n    for (const valuesToReplace of configTag.clevertap.params.eventProps) {\n      if (valuesToReplace.value === TagValuesToReplace.CURRENT_DATE) {\n        configTag.clevertap.params.eventProps[0].value = currentDate;\n      }\n\n      if (valuesToReplace.value === TagValuesToReplace.COMMERCE) {\n        configTag.clevertap.params.eventProps[1].value = this.authorizationUserViewModel.appName;\n      }\n    }\n\n    const property = [];\n    const valueProperty = [];\n    const paramsLength = configTag.clevertap.params.eventProps.length;\n\n    for (let i = 0; i < paramsLength; i++) {\n      property.push(configTag.clevertap.params.eventProps[i].label);\n      valueProperty.push(configTag.clevertap.params.eventProps[i].value);\n    }\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.facebook.type,\n      params: {\n        eventName: configTag.facebook.params.eventName,\n      },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.firebase.type,\n      params: {\n        eventName: configTag.firebase.params.eventName,\n      },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: configTag.clevertap.type,\n      params: {\n        eventName: configTag.clevertap.params.eventName,\n        eventProps: stringsArrayToObjectWithValues(property, valueProperty),\n      },\n    });\n  }\n}\n","export const PermissionsConfig = Object.freeze({\n  i18n: {\n    alerts: {\n      unavailableService: 'open-banking.alerts.unavailable-service',\n    },\n  },\n  routes: {\n    closet: '/admin/closet/',\n  },\n});\n"],"sourceRoot":"webpack:///"}
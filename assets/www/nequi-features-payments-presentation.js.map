{"version":3,"sources":["./libs/features/payments/src/presentation/index.ts","./libs/features/payments/src/presentation/middleware/payment-home.middleware.ts","./libs/features/payments/src/presentation/pages/pending-payment/pending-payment.view-model.ts","./libs/features/payments/src/presentation/organisms/payment-options.organism.ts","./libs/features/payments/src/presentation/organisms/payment-options.organism.html","./libs/features/payments/src/presentation/pages/pending-payment/pending-payment.page.ts","./libs/features/payments/src/presentation/pages/pending-payment/pending-payment.page.html","./libs/features/payments/src/presentation/pages/quick-payment/quick-payment.view-model.ts","./libs/features/payments/src/presentation/feature-payments-routing.module.ts","./libs/features/payments/src/config/payments-config.provider.ts","./libs/features/payments/src/presentation/pages/quick-payment/quick-payment.config.ts","./libs/features/payments/src/presentation/config.ts","./libs/features/payments/src/config/index.ts","./libs/features/payments/src/presentation/feature-payments.module.ts","./libs/features/payments/src/presentation/pages/quick-payment/quick-payment.page.ts","./libs/features/payments/src/presentation/pages/quick-payment/quick-payment.page.html","./libs/features/payments/src/config/payments.config.ts","./libs/features/payments/src/presentation/middleware/read-qr.middleware.ts"],"names":[],"mappings":"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","file":"nequi-features-payments-presentation.js","sourcesContent":["export * from './feature-payments.module';\nexport * from './organisms/payment-options.organism';\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n  RouterStateSnapshot,\n  UrlTree\n} from '@angular/router';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { PaymentsConfigProvider } from '@nequi/features/payments/config';\nimport { BottomSheetController, NavRootBottomSheetComponent } from '@nequi/ui';\nimport { isTypeOf } from '@nequi/utils/types';\n\nimport { PaymentOptionsOrganism } from '../organisms/payment-options.organism';\n\n@Injectable()\nexport class PaymentHomeMiddleware implements CanActivate {\n  constructor(\n    private bottomSheetController: BottomSheetController,\n    private router: Router,\n    private translateProvider: TranslateProvider,\n    private moduleConfigProvider: ModuleConfigProvider,\n    private paymentsConfigProvider: PaymentsConfigProvider\n  ) {}\n\n  public async canActivate(\n    _route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Promise<UrlTree> {\n    await this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n    const routeUrl = await this.openBottomSheet();\n\n    if (routeUrl && isTypeOf<string>(routeUrl, String)) {\n      return this.router.createUrlTree([state.url, routeUrl]);\n    }\n  }\n\n  private async openBottomSheet(): Promise<string> {\n    const bottomSheet = this.bottomSheetController.create({\n      component: NavRootBottomSheetComponent,\n      isBackdropDismiss: true,\n      componentProps: {\n        rootPage: PaymentOptionsOrganism,\n        inputProps: {\n          showReportOption: this.paymentsConfigProvider.showReportOption,\n        },\n      },\n    });\n\n    await bottomSheet.open();\n    const response = await bottomSheet.onDidDismiss();\n\n    return response.data;\n  }\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { PendingPaymentEntity } from '@nequi/features/payments/core';\n\nimport { PaymentsConfig } from '../../config';\n\nexport class PendingPaymentViewModel {\n  public form: FormGroup;\n  public amount: FormControl;\n  public merchant: FormControl;\n  public pocket: FormControl;\n  public isBalanceShowed = false;\n\n  public init(data: PendingPaymentEntity) {\n    this.merchant = new FormControl({ value: data?.name, disabled: true }, [Validators.required]);\n\n    this.amount = new FormControl({ value: data?.value, disabled: true }, [\n      Validators.required,\n      Validators.min(1),\n    ]);\n\n    this.pocket = new FormControl();\n\n    this.form = new FormGroup({\n      amount: this.amount,\n      merchant: this.merchant,\n      pocket: this.pocket,\n    });\n  }\n\n  public getPocketName() {\n    return this.pocket.value ? this.pocket?.value?.name : PaymentsConfig.defaultPocket;\n  }\n}\n","import { Component, Injector, Input } from '@angular/core';\nimport { ModuleConfigProvider, TranslateProvider } from '@nequi/features/commons';\nimport { MyQrOrganism } from '@nequi/features/commons/presentation';\nimport { NavRootBottomSheetBaseComponent } from '@nequi/ui';\n\nimport { PaymentsConfig } from '../config';\n\n@Component({\n  selector: 'app-payment-options',\n  templateUrl: './payment-options.organism.html',\n})\nexport class PaymentOptionsOrganism extends NavRootBottomSheetBaseComponent {\n  @Input() public showReportOption: boolean;\n\n  public options = PaymentsConfig.options;\n\n  constructor(\n    private moduleConfigProvider: ModuleConfigProvider,\n    translateProvider: TranslateProvider,\n    injector: Injector\n  ) {\n    super(injector);\n    translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public onOptionClicked(option) {\n    if (option.url) {\n      return this.bottomSheetController.dismiss(option.url);\n    }\n\n    this.forward(MyQrOrganism, {\n      theme: 'light',\n      showReportOption: this.showReportOption,\n    });\n  }\n\n  public close() {\n    this.bottomSheetController.dismiss(null);\n  }\n}\n","<div class=\"ion-page\">\n  <ion-header class=\"ion-no-border\">\n    <ion-toolbar>\n      <ion-buttons slot=\"end\">\n        <ion-button id=\"option-selector_close_button\" (click)=\"close()\">\n          <ion-icon color=\"dark\" slot=\"icon-only\" name=\"close-outline\"></ion-icon>\n        </ion-button>\n      </ion-buttons>\n    </ion-toolbar>\n  </ion-header>\n\n  <ion-content class=\"ion-content--white ion-padding-horizontal\" fullscreen>\n    <h2 class=\"nequi-title\">{{ 'payments.bottom-sheet.title' | translate }}</h2>\n\n    <ion-list>\n      <nequi-nav-button-card\n        class=\"margin-bottom-8\"\n        *ngFor=\"let option of options\"\n        (clicked)=\"onOptionClicked(option)\"\n        [title]=\"option.title | translate\"\n        [leftImage]=\"option.icon | translate\"\n        [description]=\"option.description | translate\"\n        showIcon=\"true\"\n      ></nequi-nav-button-card>\n    </ion-list>\n  </ion-content>\n</div>\n","import {\n  AnalyticsInteractor,\n  AnalyticsType,\n  NOT_BALANCE_AVAILABLE_ERRORS\n} from 'libs/features/commons/src/core';\n\nimport { CurrencyPipe } from '@angular/common';\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CoreException } from '@nequi/commons/exceptions';\nimport { InjectorProvider } from '@nequi/commons/providers';\nimport { ModuleConfigProvider } from '@nequi/features/commons';\nimport { PaymentTransaction, Transaction, TRANSACTION_ERRORS } from '@nequi/features/commons/core';\nimport { TransactionBasePage } from '@nequi/features/commons/presentation';\nimport { HomeService, HomeViewModel } from '@nequi/features/notifications/presentation';\nimport { Notification } from '@nequi/features/notifications/presentation/entities';\nimport { PendingPaymentEntity } from '@nequi/features/payments/core';\nimport { ProfileService } from '@nequi/features/profile/presentation';\nimport { CardModalService, ConfirmInfoPocketProps } from '@nequi/ui';\nimport { getFormattedDateTimes, getFormattedHour } from '@nequi/utils/date';\nimport { stringsArrayToObjectWithValues } from '@nequi/utils/functions';\nimport { createFormat } from '@nequi/utils/string';\n\nimport { PaymentsConfig } from '../../config';\nimport { PendingPaymentViewModel } from './pending-payment.view-model';\n\n@Component({\n  selector: 'app-payments-home',\n  templateUrl: './pending-payment.page.html',\n})\nexport class PendingPaymentPage extends TransactionBasePage implements OnInit {\n  public viewModel = new PendingPaymentViewModel();\n  public modalService: CardModalService;\n  private notification: Notification;\n  private paymentData: PendingPaymentEntity;\n  private notificationViewModel = new HomeViewModel();\n\n  constructor(\n    injector: Injector,\n    private router: Router,\n    public profileService: ProfileService,\n    private currencyPipe: CurrencyPipe,\n    private moduleConfigProvider: ModuleConfigProvider,\n    private homeService: HomeService,\n    private notificationHomeService: HomeService,\n    private analyticsInteractor: AnalyticsInteractor\n  ) {\n    super(injector);\n\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n    this.modalService = InjectorProvider.get(CardModalService);\n  }\n\n  public async ngOnInit(): Promise<void> {\n    this.notification = this.router.getCurrentNavigation().extras?.state as Notification;\n    this.paymentData = this.notification.event.info as PendingPaymentEntity;\n    this.viewModel.init(this.paymentData);\n    this.setAnalitycsIntentionPayment();\n  }\n\n  public async makePayment(): Promise<void> {\n    const transaction = new PaymentTransaction<{ transactionId: string; code: string }>()\n      .withAmount(this.viewModel.amount.value)\n      .withData({\n        transactionId: this.paymentData.tranId,\n        code: this.paymentData.code,\n      })\n      .withPocket(this.viewModel.form.value.pocket);\n\n    super.executeTransaction(transaction);\n  }\n\n  public async setAnalyticsInsufficientMoney() {\n    const paramsInsufficientBalance = [\n      PaymentsConfig.productName,\n      this.notification?.event?.info?.name,\n      PaymentsConfig.analytics.events.tagInsufficientBalance.status,\n      getFormattedDateTimes(),\n      getFormattedHour(),\n      this.notification?.event?.info?.value,\n    ];\n\n    await this.setAnalytics(\n      PaymentsConfig.analytics.events.tagInsufficientBalance.name,\n      PaymentsConfig.analytics.events.tagInsufficientBalance?.params?.requiredParams,\n      paramsInsufficientBalance\n    );\n  }\n\n  protected async setOriginMoney(transaction: Transaction) {\n    if (transaction.pocket === null) {\n      const pocket = this.originMoneyService.getAvailablePocket();\n\n      transaction.withPocket(pocket);\n    }\n\n    return transaction;\n  }\n\n  protected async showConfirmation(transaction: Transaction): Promise<boolean> {\n    const info = await this.getConfirmationInfo(transaction);\n\n    if (!info) {\n      return true;\n    }\n\n    const { data } = await this.confirmBottomSheetService.show(\n      await this.updateConfirmationWithPocket(info, transaction)\n    );\n\n    if (data) {\n      return true;\n    }\n\n    this.setAnalitycsCancelNotification();\n\n    return false;\n  }\n\n  protected async onTransactionFailed(error: CoreException, _transaction: Transaction) {\n    if (error && error?.code === TRANSACTION_ERRORS.TRANSACTION_DOES_NOT_EXIT) {\n      this.showDialogNotBalance();\n    }\n\n    if (error && NOT_BALANCE_AVAILABLE_ERRORS.includes(error?.code)) {\n      this.setAnalyticsInsufficientMoney();\n    }\n\n    this.loadingService.hide(false);\n\n    await this.notificationHomeService.archiveNotification(\n      this.notificationViewModel.currentNotification\n    );\n\n    throw error;\n  }\n\n  protected async showDialogNotBalance() {\n    const messagesKey = PaymentsConfig.i18n.notBalanceError;\n    const messages = this.translateProvider.get(messagesKey);\n\n    await this.navigatorProvider.navigateForward(PaymentsConfig.routes.adminUrl);\n\n    await this.modalService.show({\n      imgPath: messages.image,\n      title: messages.title,\n      content: messages.content,\n      buttons: [\n        {\n          text: messages.buttons.accept,\n          handler: async () => {},\n        },\n      ],\n    });\n  }\n\n  protected async onTransactionSuccess(_response?: unknown, _transaction?: Transaction) {\n    const paramsSuccess = [\n      PaymentsConfig.productName,\n      PaymentsConfig.analytics.events.tagTransactionSuccess?.status,\n      this.notification?.event?.info?.name,\n      getFormattedDateTimes(),\n      getFormattedHour(),\n      this.notification?.event?.info?.value,\n      this.viewModel.getPocketName(),\n    ];\n\n    await this.setAnalytics(\n      PaymentsConfig.analytics.events.tagTransactionSuccess?.name,\n      PaymentsConfig.analytics.events.tagTransactionSuccess?.params?.requiredParams,\n      paramsSuccess\n    );\n\n    await this.homeService.archiveNotification(this.notification);\n    await this.navigatorProvider.navigateRoot(PaymentsConfig.routes.movements);\n    const message = createFormat(\n      this.translateProvider.get(PaymentsConfig.i18n.paymentSuccessful),\n      [this.paymentData.name]\n    );\n\n    this.toastService.showSuccess(message);\n  }\n\n  protected async getConfirmationInfo(_transaction: Transaction): Promise<ConfirmInfoPocketProps> {\n    const messages = this.translateProvider.get(PaymentsConfig.i18n.paymentConfirmation);\n\n    return {\n      title: messages.title,\n      items: [\n        { label: messages.commerce, value: this.paymentData.name },\n        {\n          label: messages.amount,\n          value: this.currencyPipe.transform(this.viewModel.amount.value),\n        },\n      ],\n      confirmLabel: messages.accept,\n    };\n  }\n\n  private async setAnalitycsCancelNotification() {\n    const paramsCancel = [\n      getFormattedDateTimes(),\n      PaymentsConfig.productName,\n      this.notification?.event?.info?.name,\n      this.notification?.event?.info?.value,\n    ];\n\n    await this.setAnalytics(\n      PaymentsConfig.analytics.events.tagTransactionCancel.name,\n      PaymentsConfig.analytics.events.tagTransactionCancel?.params?.requiredParams,\n      paramsCancel\n    );\n  }\n\n  private setAnalitycsIntentionPayment() {\n    const valueParams = [\n      getFormattedDateTimes(),\n      getFormattedHour(),\n      this.notification?.event?.info?.name,\n      this.notification?.event?.info?.value,\n    ];\n\n    this.setAnalytics(\n      PaymentsConfig.analytics.events.tagIntentionPayment?.name,\n      PaymentsConfig.analytics.events.tagIntentionPayment?.params?.requiredParams,\n      valueParams\n    );\n  }\n\n  private async setAnalytics(eventName: string, params: string[], valueParams: string[]) {\n    const trackEventClevertap = {\n      type: AnalyticsType.CLEVERTAP,\n      params: {\n        eventName,\n        eventProps: stringsArrayToObjectWithValues(params, valueParams),\n      },\n    };\n\n    const trackEventFirebase = {\n      type: AnalyticsType.FIREBASE,\n      params: {\n        eventName,\n        eventProps: stringsArrayToObjectWithValues(params, valueParams),\n      },\n    };\n\n    const trackEventFacebook = {\n      type: AnalyticsType.FACEBOOK,\n      params: {\n        eventName,\n        eventProps: stringsArrayToObjectWithValues(params, valueParams),\n      },\n    };\n\n    await this.analyticsInteractor.trackEvent(trackEventClevertap);\n    await this.analyticsInteractor.trackEvent(trackEventFirebase);\n    await this.analyticsInteractor.trackEvent(trackEventFacebook);\n  }\n}\n","<ion-header class=\"nequi-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button id=\"payments-home_go-back_button\" (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"viewModel.isBalanceShowed = !viewModel.isBalanceShowed\">\n        <ion-icon\n          slot=\"icon-only\"\n          name=\"{{ viewModel.isBalanceShowed ? 'chevron-up-outline' : 'chevron-down-outline' }}\"\n        ></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n\n  <app-balance-header\n    [isDarkTheme]=\"false\"\n    [isShow]=\"viewModel.isBalanceShowed\"\n  ></app-balance-header>\n</ion-header>\n\n<ion-content\n  class=\"ion-padding-horizontal ion-content--white\"\n  fullscreen=\"true\"\n  appFormContentStyle\n>\n  <ion-text class=\"nequi-title\"> {{ 'payments.pending-payment.title' | translate }} </ion-text>\n\n  <form *ngIf=\"viewModel.form\" [formGroup]=\"viewModel.form\">\n    <ion-item class=\"nequi-item margin-bottom-8\">\n      <ion-label\n        position=\"floating\"\n        class=\"payments__merchant-label nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.merchant.disabled }\"\n      >\n        {{ 'payments.home.inputs.merchant.placeholder' | translate }}\n      </ion-label>\n      <ion-input class=\"payments__merchant-input\" [formControl]=\"viewModel.merchant\"> </ion-input>\n    </ion-item>\n\n    <ion-item\n      class=\"nequi-item margin-bottom-8\"\n      [nequiControlErrors]=\"{\n        control: viewModel.amount,\n        messages: 'validators.general' | translate\n      }\"\n    >\n      <ion-label\n        position=\"floating\"\n        class=\"payments__amount-label nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.amount.disabled }\"\n      >\n        {{ 'payments.home.inputs.amount.placeholder' | translate }}\n      </ion-label>\n\n      <nequi-input-currency\n        [isReadOnly]=\"true\"\n        class=\"sc-ion-input-ios-h\"\n        tooltipType=\"error\"\n        [control]=\"viewModel.amount\"\n        inputClass=\"nequi-item__input\"\n        [allowNegative]=\"false\"\n      ></nequi-input-currency>\n    </ion-item>\n\n    <ion-item lines=\"none\" class=\"ion-no-padding nequi-item-no-background nequi-item-no-lines\">\n      <h5>{{ 'payments.home.inputs.pocket.placeholder' | translate }}</h5>\n    </ion-item>\n    <nequi-origin-money-control\n      [formControl]=\"viewModel.pocket\"\n      [minAmount]=\"viewModel.amount.value\"\n      class=\"margin-bottom-8\"\n      [title]=\"'payments.home.inputs.pocket.placeholder' | translate\"\n      (insufficientMoney)=\"setAnalyticsInsufficientMoney()\"\n    ></nequi-origin-money-control>\n    <ion-text color=\"primary\">\n      <span class=\"label__message\"> {{ 'payments.home.inputs.pocket.info' | translate }} </span>\n    </ion-text>\n  </form>\n\n  <ion-footer class=\"nequi-footer\">\n    <ion-toolbar>\n      <ion-button\n        id=\"payments-home_next_button\"\n        shape=\"round\"\n        color=\"guayaba\"\n        class=\"margin-vertical-16\"\n        expand=\"block\"\n        (click)=\"makePayment()\"\n      >\n        {{ 'payments.home.buttons.next' | translate }}\n      </ion-button>\n    </ion-toolbar>\n  </ion-footer>\n</ion-content>\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { QuickPaymentEntity } from '@nequi/features/payments/core/entities';\nimport { MessageManagerConfig } from '@nequi/ui';\n\nimport { QuickPaymentConfig } from './quick-payment.config';\n\nexport class QuickPaymentViewModel {\n  public form: FormGroup;\n\n  public amount: FormControl;\n  public message: FormControl;\n  public merchant: FormControl;\n  public payerReference: FormControl;\n  public showPayerReference: boolean;\n  public pocket: FormControl;\n  public isBalanceShowed = false;\n  public showMessage: boolean;\n  public disablePayerReference: boolean;\n  public payerReferenceTooltip: MessageManagerConfig;\n\n  public init(data?: QuickPaymentEntity, payerReferenceTooltipInfo?: string) {\n    this.merchant = new FormControl({ value: data?.destination, disabled: !!data?.destination }, [\n      Validators.required,\n    ]);\n\n    this.amount = new FormControl({ value: data?.amount, disabled: !!data?.amount }, [\n      Validators.required,\n      Validators.min(1),\n    ]);\n\n    this.message = new FormControl({\n      value: data.description || null,\n      disabled: !!data?.description,\n    });\n\n    this.payerReference = new FormControl(\n      data.payerReference,\n      Validators.maxLength(QuickPaymentConfig.maxLengthString)\n    );\n\n    this.pocket = new FormControl(data.pocket);\n    this.showPayerReference = data.showPayerReference;\n    this.showMessage = data.description && data.description !== '';\n    this.disablePayerReference = !!data.payerReference;\n    this.payerReferenceTooltip = {\n      control: this.payerReference,\n      cssClass: 'margin-bottom-8',\n    };\n\n    if (!this.disablePayerReference) {\n      this.payerReferenceTooltip.helpMessage = payerReferenceTooltipInfo;\n    }\n\n    this.form = new FormGroup({\n      amount: this.amount,\n      message: this.message,\n      merchant: this.merchant,\n      payerReference: this.payerReference,\n      pocket: this.pocket,\n    });\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SendFromQrPage } from '@nequi/features/send/presentation';\n\nimport { PaymentHomeMiddleware } from './middleware/payment-home.middleware';\nimport { ReadQrMiddleWare } from './middleware/read-qr.middleware';\nimport { PendingPaymentPage } from './pages/pending-payment/pending-payment.page';\nimport { QuickPaymentPage } from './pages/quick-payment/quick-payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Type,\n    canActivate: [PaymentHomeMiddleware],\n  },\n  {\n    path: 'read-qr',\n    component: Type,\n    canActivate: [ReadQrMiddleWare],\n  },\n  {\n    path: 'send/from-qr',\n    component: SendFromQrPage,\n  },\n  {\n    path: 'pay',\n    component: QuickPaymentPage,\n  },\n  {\n    path: 'pending',\n    component: PendingPaymentPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PaymentRoutingModule {}\n","import { QRConfigButton, QRConfigView } from '@nequi/native/qr-reader';\n\nexport abstract class PaymentsConfigProvider {\n  public readonly configButtonQR: QRConfigButton;\n  public readonly configViewQR: QRConfigView;\n  public readonly showReportOption: boolean;\n}\n","export const QuickPaymentConfig = {\n  i18n: {\n    processError: 'payments.quick-payment.process.errors.not-match',\n    userNotFound: 'payments.quick-payment.read.errors.user-not-found',\n    readError: 'payments.quick-payment.read.errors.default',\n    asynchronousTransactionAlert: 'payments.errors-messages.asynchronous-transaction',\n    differentAmountAlert: 'payments.errors-messages.different-amount',\n    expiredPaymentAlert: 'payments.errors-messages.expired-payment',\n    noPendingPaymentAlert: 'payments.errors-messages.no-pending-payment',\n    rejectedPaymentAlert: 'payments.errors-messages.rejected-payment',\n    technicalErrorAlert: 'payments.errors-messages.technical-error',\n    insufficientFundsAlert: 'payments.errors-messages.insufficient-funds',\n    duplicateTransactionAlert: 'payments.errors-messages.duplicate-transaction',\n    invalidQrAlert: 'payments.errors-messages.invalid-qr',\n    payerInfo: 'payments.home.inputs.payerReference.info',\n    paymentSuccess: 'payments.home.messages.success',\n    annulateSuccess: 'payments.home.messages.annulate-success',\n    paymentCancellationTitle: 'payments.home.cancellation-title',\n    paymentTitle: 'payments.home.title',\n    buttonCancellationLabel: 'payments.home.buttons.accept',\n    buttonLabel: 'payments.home.buttons.next',\n    closedAndBlockedAccountAlert: 'payments.errors-messages.closed-and-blocked-account',\n  },\n  routes: {\n    adminUrl: '/admin/dashboard',\n    movements: '/admin/movements',\n    login: '/auth',\n    readQr: '/admin/payments/read-qr',\n    cashIn: '/admin/cash-in',\n  },\n  paymentsRouteBase: 'payments',\n  maxLengthString: 150,\n  analytics: {\n    events: {\n      qrSuccessPurchase: 'Pago_qr_exitoso',\n      qrSuccessPurchaseFacebook: 'fb_mobile_purchase',\n    },\n  },\n};\n","import { ProcessingErrorsCode } from '../core/exceptions/error-code';\n\nexport const PaymentsConfig = {\n  analytics: {\n    typeTransaction: 'success',\n    events: {\n      tagTransactionSuccess: {\n        name: 'Trx_exitosa',\n        status: 'success',\n        params: {\n          requiredParams: ['Producto', 'Estado', 'Comercio', 'Fecha', 'Hora', 'Valor', 'Bolsillo'],\n        },\n      },\n      tagTransactionCancel: {\n        name: 'Cancelar_confirmacion',\n        params: {\n          requiredParams: ['Fecha', 'Producto', 'Comercio', 'Valor'],\n        },\n      },\n      tagIntentionPayment: {\n        name: 'Intencion_pago',\n        params: {\n          requiredParams: ['Fecha_intencion', 'Hora', 'Comercio', 'Valor'],\n        },\n      },\n      tagInsufficientBalance: {\n        name: 'Saldo_insuficiente',\n        status: 'rejected',\n        params: {\n          requiredParams: ['producto', 'comercio', 'estado', 'fecha', 'hora', 'valor'],\n        },\n      },\n    },\n  },\n  defaultPocket: 'Disponible',\n  productName: 'api_push',\n  i18n: {\n    processError: 'payments.quick-payment.process.errors.not-match',\n    userNotFound: 'payments.quick-payment.read.errors.user-not-found',\n    readError: 'payments.quick-payment.read.errors.default',\n    bottomSheet: 'payments.bottom-sheet',\n    paymentConfirmation: 'payments.pending-payment.confirm',\n    paymentSuccessful: 'payments.pending-payment.toast.success',\n    notBalanceError: 'payments.errors-messages.not-balance',\n    externalQrError: 'payments.quick-payment.process.errors.external-qr',\n  },\n  routes: {\n    adminUrl: '/admin/dashboard',\n    login: '/auth',\n    redeemCode: '/admin/redeem-code',\n    validateRedeemCode: '/admin/redeem-code/validate-code',\n    readQr: 'read-qr',\n    payment: 'pay',\n    sendFromQr: 'send/from-qr',\n    movements: '/admin/movements',\n  },\n  options: [\n    {\n      title: 'payments.bottom-sheet.options.qr-payment.title',\n      description: 'payments.bottom-sheet.options.qr-payment.description',\n      icon: 'payments.bottom-sheet.options.qr-payment.icon',\n      url: 'read-qr',\n    },\n    {\n      title: 'payments.bottom-sheet.options.my-qr.title',\n      description: 'payments.bottom-sheet.options.my-qr.description',\n      icon: 'payments.bottom-sheet.options.my-qr.icon',\n    },\n  ],\n  paymentsRouteBase: 'payments/',\n  errorMessages: {\n    [ProcessingErrorsCode.PURCHASE_ALREADY_MADE]:\n      'payments.quick-payment.process.errors.purchase-already-made',\n    [ProcessingErrorsCode.CANCELED_PURCHASE]:\n      'payments.quick-payment.process.errors.canceled-purchase',\n    [ProcessingErrorsCode.PHONE_NUMBER_NOT_FOUND]:\n      'payments.quick-payment.process.errors.phone-number-not-found',\n    [ProcessingErrorsCode.NO_PAYMENT_PENDING]:\n      'payments.quick-payment.process.errors.no-payment-pending',\n    [ProcessingErrorsCode.EXPIRED_PAYMENT]: 'payments.quick-payment.process.errors.expired-payment',\n    [ProcessingErrorsCode.INVALID_QR]: 'payments.quick-payment.process.errors.invalid-qr',\n  },\n};\n","export { PaymentsConfigProvider } from './payments-config.provider';\nexport { PaymentsConfig } from './payments.config';\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ModuleConfigProvider } from '@nequi/features/commons';\nimport { FeaturesCommonsModule, QrReaderService } from '@nequi/features/commons/presentation';\nimport { FeaturesMoneyManagementModule } from '@nequi/features/money-management/presentation';\nimport { NequiUiModule } from '@nequi/ui';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { PaymentsConfigProvider } from '../config';\nimport { PaymentsConfig } from '../config/payments.config';\nimport { PaymentRoutingModule } from './feature-payments-routing.module';\nimport { PaymentHomeMiddleware } from './middleware/payment-home.middleware';\nimport { ReadQrMiddleWare } from './middleware/read-qr.middleware';\nimport { PaymentOptionsOrganism } from './organisms/payment-options.organism';\nimport { PendingPaymentPage } from './pages/pending-payment/pending-payment.page';\nimport { QuickPaymentPage } from './pages/quick-payment/quick-payment.page';\n\n@NgModule({\n  declarations: [PaymentOptionsOrganism, PendingPaymentPage, QuickPaymentPage],\n  imports: [\n    CommonModule,\n    IonicModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    NequiUiModule,\n    PaymentRoutingModule,\n    FeaturesMoneyManagementModule,\n    FeaturesCommonsModule,\n  ],\n  providers: [\n    PaymentHomeMiddleware,\n    ReadQrMiddleWare,\n    QrReaderService,\n    {\n      provide: ModuleConfigProvider,\n      useValue: PaymentsConfig,\n    },\n  ],\n})\nexport class FeaturePaymentsModule {\n  public static forChild(config: PaymentsConfigProvider): ModuleWithProviders<FeaturePaymentsModule> {\n    return {\n      ngModule: FeaturePaymentsModule,\n      providers: [\n        {\n          provide: PaymentsConfigProvider,\n          useValue: config,\n        },\n      ],\n    };\n  }\n}\n","import { CurrencyPipe } from '@angular/common';\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  AccountLockedToTransactException,\n  ClosedAccountException,\n  CoreException\n} from '@nequi/commons/exceptions';\nimport {\n  AnalyticsInteractor,\n  AnalyticsType,\n  PaymentEntity,\n  PaymentTransaction,\n  PaymentType,\n  QrInfoEntity,\n  Transaction\n} from '@nequi/features/commons/core';\nimport { TransactionBasePage } from '@nequi/features/commons/presentation';\nimport { ModuleConfigProvider } from '@nequi/features/commons/providers';\nimport {\n  AsynchronousTransactionException,\n  DifferentAmountException,\n  ExpiredPaymentException,\n  InsufficientFundsException,\n  InvalidQrException,\n  KinposPaymentInfoEntity,\n  KinposPaymentTransaction,\n  QrCancellationTransaction,\n  QrIssuer,\n  QrType,\n  RejectedPaymentException,\n  TechnicalErrorException,\n  TransactionDuplicatedException,\n  WithoutPendingPaymentsException\n} from '@nequi/features/payments/core';\nimport { ProcessQrInfoEntity, QuickPaymentEntity } from '@nequi/features/payments/core/entities';\nimport { ProfileService } from '@nequi/features/profile/presentation';\nimport { CardModalService } from '@nequi/ui';\nimport { createFormat } from '@nequi/utils/string';\n\nimport { ErrorAlert } from './entities/error-alert.entity';\nimport { QuickPaymentConfig } from './quick-payment.config';\nimport { QuickPaymentViewModel } from './quick-payment.view-model';\n\n@Component({\n  selector: 'app-quick-payment',\n  templateUrl: './quick-payment.page.html',\n  styleUrls: ['./quick-payment.page.scss'],\n})\nexport class QuickPaymentPage extends TransactionBasePage implements OnInit {\n  public viewModel = new QuickPaymentViewModel();\n  public isPaymentCancellation = false;\n  public titleAndButtonTexts = {\n    title: QuickPaymentConfig.i18n.paymentTitle,\n    button: QuickPaymentConfig.i18n.buttonLabel,\n  };\n\n  public get minAmount() {\n    return this.viewModel.amount.value || 0;\n  }\n\n  private qrType: string;\n  private paymentData: QuickPaymentEntity<\n    QrInfoEntity | KinposPaymentInfoEntity | ProcessQrInfoEntity\n  >;\n\n  private factoryException = {\n    [AsynchronousTransactionException.name]: () => this.processAsynchronousException(),\n    [DifferentAmountException.name]: () => this.processDifferentAmountException(),\n    [WithoutPendingPaymentsException.name]: () => this.processWithoutPendingException(),\n    [ExpiredPaymentException.name]: () => this.processExpiredPaymentException(),\n    [RejectedPaymentException.name]: (error: RejectedPaymentException) =>\n      this.processRejectedPaymentException(error),\n    [TechnicalErrorException.name]: (error: TechnicalErrorException) =>\n      this.processTechnicalErrorException(error),\n    [InsufficientFundsException.name]: () => this.processInsufficientFundsException(),\n    [TransactionDuplicatedException.name]: (error: TechnicalErrorException) =>\n      this.processTransactionDuplicatedException(error),\n    [InvalidQrException.name]: (error: InvalidQrException) => this.processInvalidQrException(error),\n    [ClosedAccountException.name]: () => this.processClosedAndBlockedAccountException(),\n    [AccountLockedToTransactException.name]: () => this.processClosedAndBlockedAccountException(),\n  };\n\n  constructor(\n    private router: Router,\n    public profileService: ProfileService,\n    private currencyPipe: CurrencyPipe,\n    private cardModalService: CardModalService,\n    private analyticsInteractor: AnalyticsInteractor,\n    private moduleConfigProvider: ModuleConfigProvider,\n    injector: Injector\n  ) {\n    super(injector);\n    this.translateProvider.loadModule(this.moduleConfigProvider.i18n.moduleKey);\n  }\n\n  public async ngOnInit(): Promise<void> {\n    this.paymentData = this.router.getCurrentNavigation().extras?.state as QuickPaymentEntity;\n\n    this.setPaymentCancellationValues();\n    const payerReferenceToolTipInfo = this.translateProvider.get(QuickPaymentConfig.i18n.payerInfo);\n\n    this.viewModel.init(this.paymentData, payerReferenceToolTipInfo);\n  }\n\n  public async makePayment(): Promise<void> {\n\n    if (this.paymentData.showPayerReference) {\n      this.preparePaymentData();\n    }\n\n    if (this.paymentData.issuer === QrIssuer.KINPOS) {\n      const amount = (this.paymentData.paymentInfo as KinposPaymentInfoEntity).amount;\n\n      const transaction = new KinposPaymentTransaction()\n        .withAmount(amount)\n        .withPocket(this.viewModel.pocket.value)\n        .withData(this.paymentData);\n\n      super.executeTransaction(transaction);\n\n      return;\n    }\n\n    if (this.qrType === QrType.ANNULATE) {\n      this.cancelPayment();\n\n      return;\n    }\n\n    const transaction = new PaymentTransaction<\n      PaymentEntity<{ name: string; code: string }, unknown>\n    >()\n      .withAmount(this.viewModel.amount.value)\n      .withPocket(this.viewModel.pocket.value)\n      .withData({\n        merchant: {\n          name: this.viewModel.merchant.value,\n          code: '',\n        },\n        type: PaymentType.QR,\n        additionalInfo: this.paymentData,\n      });\n\n    super.executeTransaction(transaction);\n  }\n\n  public cancelPayment() {\n    const transaction = new QrCancellationTransaction()\n      .withAmount(this.viewModel.amount.value)\n      .withData({\n        merchant: {\n          name: this.viewModel.merchant.value,\n          code: '',\n        },\n        type: PaymentType.ANNULATE,\n        additionalInfo: this.paymentData,\n      });\n\n    super.executeTransaction(transaction);\n  }\n\n  protected async setOriginMoney(transaction: Transaction): Promise<Transaction> {\n    if (transaction.pocket === null) {\n      const pocket = this.originMoneyService.getAvailablePocket();\n\n      transaction.withPocket(pocket);\n\n      return transaction;\n    }\n\n    if (this.qrType === QrType.ANNULATE) {\n      transaction.withPocket(null);\n\n      return transaction;\n    }\n\n    return super.setOriginMoney(transaction);\n  }\n\n  protected async onTransactionFailed(error: CoreException, _transaction: Transaction) {\n    this.loadingService.hide(false);\n\n    if (this.factoryException[error.constructor.name]) {\n      this.factoryException[error.constructor.name](error);\n\n      return;\n    }\n\n    throw error;\n  }\n\n  protected async onTransactionSuccess(_response?: unknown, _transaction?: Transaction) {\n    const annulateMessage = QuickPaymentConfig.i18n.annulateSuccess;\n    const paymentMessage = QuickPaymentConfig.i18n.paymentSuccess;\n\n    if (this.qrType !== QrType.ANNULATE) {\n      this.trackAnalyticsSuccessPurchase();\n    }\n\n    await this.navigatorProvider.navigateRoot(QuickPaymentConfig.routes.movements);\n    this.toastService.showSuccess(\n      this.translateProvider.get(this.qrType === QrType.ANNULATE ? annulateMessage : paymentMessage)\n    );\n  }\n\n  private preparePaymentData() {\n    const paymentInfo = this.paymentData.paymentInfo as ProcessQrInfoEntity;\n\n    if (this.paymentData.showPayerReference) {\n      paymentInfo.qrInfo.payerReference = this.viewModel.payerReference.value;\n    }\n\n    if (paymentInfo.qrInfo.withPayerReference) {\n      delete paymentInfo.qrInfo.withPayerReference;\n    }\n  }\n\n  private trackAnalyticsSuccessPurchase() {\n    const analytics = QuickPaymentConfig.analytics.events;\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.FIREBASE,\n      params: { eventName: analytics.qrSuccessPurchase },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.FACEBOOK,\n      params: { eventName: analytics.qrSuccessPurchase },\n    });\n\n    this.analyticsInteractor.trackEvent({\n      type: AnalyticsType.FACEBOOK,\n      params: { eventName: analytics.qrSuccessPurchaseFacebook },\n    });\n  }\n\n  private processAsynchronousException() {\n    this.showCardModal({\n      messagesRoute: QuickPaymentConfig.i18n.asynchronousTransactionAlert,\n      acceptAction: () => this.navigateToBackpack(),\n    });\n  }\n\n  private processDifferentAmountException() {\n    this.showErrorAlert({ messagesRoute: QuickPaymentConfig.i18n.differentAmountAlert });\n  }\n\n  private processWithoutPendingException() {\n    this.showErrorAlert({ messagesRoute: QuickPaymentConfig.i18n.noPendingPaymentAlert });\n  }\n\n  private processExpiredPaymentException() {\n    this.showErrorAlert({ messagesRoute: QuickPaymentConfig.i18n.expiredPaymentAlert });\n  }\n\n  private processRejectedPaymentException(error: RejectedPaymentException) {\n    this.showErrorAlertWithBackendMessage({\n      messagesRoute: QuickPaymentConfig.i18n.rejectedPaymentAlert,\n      backendMessage: error.message,\n      acceptAction: () => this.launchQrReader(),\n    });\n  }\n\n  private processTechnicalErrorException(error: TechnicalErrorException) {\n    this.showErrorAlertWithBackendMessage({\n      messagesRoute: QuickPaymentConfig.i18n.technicalErrorAlert,\n      backendMessage: error.message,\n      acceptAction: () => this.launchQrReader(),\n    });\n  }\n\n  private processInsufficientFundsException() {\n    this.showCardModal({\n      messagesRoute: QuickPaymentConfig.i18n.insufficientFundsAlert,\n      messageParams: [this.currencyPipe.transform(this.paymentData.amount).replace(' ', '')],\n      acceptAction: () => this.launchRechargeAccount(),\n    });\n  }\n\n  private processTransactionDuplicatedException(error: TransactionDuplicatedException) {\n    this.showErrorAlertWithBackendMessage({\n      messagesRoute: QuickPaymentConfig.i18n.duplicateTransactionAlert,\n      backendMessage: error.message,\n      acceptAction: () => this.launchQrReader(),\n    });\n  }\n\n  private processInvalidQrException(error: InvalidQrException) {\n    this.showErrorAlertWithBackendMessage({\n      messagesRoute: QuickPaymentConfig.i18n.invalidQrAlert,\n      backendMessage: error.message,\n      acceptAction: () => this.launchQrReader(),\n    });\n  }\n\n  private processClosedAndBlockedAccountException() {\n    const alert = this.translateProvider.get(QuickPaymentConfig.i18n.closedAndBlockedAccountAlert);\n\n    return this.alertService.show({\n      messages: alert,\n      handlers: {\n        accept: () => this.navigateToBackpack(),\n      },\n    });\n  }\n\n  private launchRechargeAccount() {\n    this.goBack();\n    this.navigatorProvider.navigateRoot(QuickPaymentConfig.routes.cashIn);\n  }\n\n  private launchQrReader() {\n    this.goBack();\n    this.navigatorProvider.navigateRoot(QuickPaymentConfig.routes.readQr);\n  }\n\n  private navigateToBackpack() {\n    this.navigatorProvider.navigateRoot(QuickPaymentConfig.routes.adminUrl);\n  }\n\n  private async showErrorAlert(error: ErrorAlert) {\n    const handler = {\n      accept: error.acceptAction,\n      cancel: error.cancelAction,\n    };\n\n    return this.alertService.showByI18n({\n      i18nKey: error.messagesRoute,\n      handlers: error.acceptAction ? handler : null,\n      messageParameters: error.messageParams,\n    });\n  }\n\n  private async showErrorAlertWithBackendMessage(error: ErrorAlert) {\n    const handler = {\n      accept: error.acceptAction,\n      cancel: error.cancelAction,\n    };\n\n    const i18nMessage = this.translateProvider.get(error.messagesRoute);\n\n    return this.alertService.show({\n      messages: {\n        header: i18nMessage.header,\n        message: error.backendMessage,\n        buttons: {\n          accept: i18nMessage.buttons.accept,\n        },\n      },\n      handlers: error.acceptAction ? handler : null,\n    });\n  }\n\n  private async showCardModal(error: ErrorAlert) {\n    const messages = this.translateProvider.get(error.messagesRoute);\n    const buttons = [];\n\n    if (error.messageParams) {\n      messages.content = createFormat(messages.content, error.messageParams);\n    }\n\n    buttons.push({\n      text: messages.buttons.accept,\n      handler: error.acceptAction,\n    });\n\n    if (messages.buttons.cancel) {\n      buttons.push({\n        text: messages.buttons.cancel,\n        color: 'medianoche-gray',\n      });\n    }\n\n    this.cardModalService.show({\n      title: messages.header,\n      imgPath: messages.image,\n      content: messages.content,\n      buttons,\n    });\n  }\n\n  private setPaymentCancellationValues() {\n    this.qrType = (this.paymentData\n      .paymentInfo as QrInfoEntity)?.additionalDataFieldTemplate?.data?.porposeOfTransaction?.data;\n\n    if (this.qrType === QrType.ANNULATE) {\n      this.titleAndButtonTexts = {\n        title: QuickPaymentConfig.i18n.paymentCancellationTitle,\n        button: QuickPaymentConfig.i18n.buttonCancellationLabel,\n      };\n\n      this.isPaymentCancellation = true;\n    }\n  }\n}\n","<ion-header class=\"nequi-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button id=\"payments-home_go-back_button\" (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"viewModel.isBalanceShowed = !viewModel.isBalanceShowed\">\n        <ion-icon\n          slot=\"icon-only\"\n          name=\"{{ viewModel.isBalanceShowed ? 'chevron-up-outline' : 'chevron-down-outline' }}\"\n        ></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n\n  <app-balance-header\n    [isDarkTheme]=\"false\"\n    [isShow]=\"viewModel.isBalanceShowed\"\n  ></app-balance-header>\n</ion-header>\n\n<ion-content\n  class=\"ion-padding-horizontal ion-content--white\"\n  fullscreen=\"true\"\n  appFormContentStyle\n>\n  <ion-text class=\"nequi-title\"> {{ titleAndButtonTexts.title | translate }} </ion-text>\n\n  <form *ngIf=\"viewModel.form\" [formGroup]=\"viewModel.form\">\n    <ion-item class=\"nequi-item margin-bottom-8\">\n      <ion-label\n        position=\"floating\"\n        class=\"payments__merchant-label nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.merchant.disabled }\"\n      >\n        {{ 'payments.home.inputs.merchant.placeholder' | translate }}\n      </ion-label>\n      <ion-input class=\"payments__merchant-input\" [formControl]=\"viewModel.merchant\"> </ion-input>\n    </ion-item>\n\n    <ion-item\n      class=\"nequi-item margin-bottom-8\"\n      *ngIf=\"viewModel.showPayerReference\"\n      [nequiMessageManager]=\"viewModel.payerReferenceTooltip\"\n    >\n      <ion-label\n        position=\"floating\"\n        class=\"payments__merchant-label nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.payerReference.disabled }\"\n      >\n        {{ 'payments.home.inputs.payerReference.placeholder' | translate }}\n      </ion-label>\n      <ion-input\n        class=\"payments__merchant-input\"\n        [formControl]=\"viewModel.payerReference\"\n        [readonly]=\"viewModel.disablePayerReference\"\n      >\n      </ion-input>\n    </ion-item>\n\n    <ion-item class=\"nequi-item margin-bottom-8\" *ngIf=\"viewModel.showMessage\">\n      <ion-label\n        position=\"floating\"\n        class=\"nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.message.disabled }\"\n      >\n        {{ 'payments.home.inputs.message.placeholder' | translate }}\n      </ion-label>\n      <ion-input\n        class=\"payments__message-input\"\n        [formControl]=\"viewModel.message\"\n        readonly\n      ></ion-input>\n    </ion-item>\n\n    <ion-item\n      class=\"nequi-item margin-bottom-8\"\n      [nequiControlErrors]=\"{\n        control: viewModel.amount,\n        messages: 'validators.general' | translate\n      }\"\n    >\n      <ion-label\n        position=\"floating\"\n        class=\"payments__amount-label nequi-item__label\"\n        [ngClass]=\"{ informative: viewModel.amount.disabled }\"\n      >\n        {{ 'payments.home.inputs.amount.placeholder' | translate }}\n      </ion-label>\n\n      <nequi-input-currency\n        class=\"sc-ion-input-ios-h\"\n        tooltipType=\"error\"\n        [control]=\"viewModel.amount\"\n        inputClass=\"nequi-item__input\"\n        [allowNegative]=\"false\"\n      ></nequi-input-currency>\n    </ion-item>\n\n    <div>\n      <ion-text color=\"medium\" class=\"margin-top-16\">\n        <h5>{{ 'payments.home.inputs.pocket.placeholder' | translate }}</h5>\n      </ion-text>\n      <nequi-origin-money-control\n        [formControl]=\"viewModel.pocket\"\n        [minAmount]=\"minAmount\"\n        class=\"margin-bottom-8\"\n      ></nequi-origin-money-control>\n    </div>\n  </form>\n\n  <ion-footer class=\"nequi-footer\">\n    <p\n      *ngIf=\"isPaymentCancellation\"\n      id=\"payment-cancellation_contextual-message_text\"\n      class=\"payment-cancellation__contextual-message\"\n    >\n      {{ 'payments.home.contextual-message' | translate }}\n    </p>\n    <ion-toolbar>\n      <ion-button\n        id=\"payments-home_next_button\"\n        shape=\"round\"\n        color=\"guayaba\"\n        class=\"margin-vertical-16\"\n        expand=\"block\"\n        [disabled]=\"viewModel.form?.invalid\"\n        (click)=\"makePayment()\"\n      >\n        {{ titleAndButtonTexts.button | translate }}\n      </ion-button>\n    </ion-toolbar>\n  </ion-footer>\n</ion-content>\n","import { Merge, ModuleConfigProvider } from '@nequi/features/commons';\n\nconst config = {\n  i18n: {\n    moduleKey: 'payments',\n  },\n};\n\nexport const PaymentsConfig = Object.freeze<Merge<ModuleConfigProvider, typeof config>>(config);\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { CoreException } from '@nequi/commons/exceptions';\nimport { AlertService, QrReaderService } from '@nequi/features/commons/presentation';\nimport { Pocket } from '@nequi/features/money-management/core';\nimport { PaymentsConfigProvider } from '@nequi/features/payments/config';\nimport {\n  QrIssuer,\n  QrType,\n  QuickPaymentEntity,\n  QuickPaymentInteractor,\n  ReadingType,\n  UnrecognizedQrException\n} from '@nequi/features/payments/core';\nimport { GoToCodeException } from '@nequi/native/commons';\nimport { LoadingService } from '@nequi/ui';\n\nimport { OriginRedeemType } from '../../../../redeem-code/src/data/entities/origin-redeem-type';\nimport { PaymentsConfig } from '../config';\n\n@Injectable()\nexport class ReadQrMiddleWare implements CanActivate {\n  private nextUrl: string;\n  private currentPocket: Pocket;\n  private activeRoute: ActivatedRouteSnapshot;\n  private activeState: RouterStateSnapshot;\n\n  constructor(\n    private qrReaderService: QrReaderService,\n    private loadingService: LoadingService,\n    private alertService: AlertService,\n    private navController: NavController,\n    private quickPaymentInteractor: QuickPaymentInteractor,\n    private router: Router,\n    private paymentsConfigProvider: PaymentsConfigProvider\n  ) {}\n\n  public async canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Promise<boolean> {\n    this.activeRoute = route;\n    this.activeState = state;\n\n    this.currentPocket = this.router.getCurrentNavigation().extras.state?.pocket;\n    this.nextUrl = null;\n\n    return this.initProcess();\n  }\n\n  private async initProcess(): Promise<boolean> {\n    try {\n      const data = await this.obtainTransactionData();\n\n      if (!data) {\n        return;\n      }\n\n      this.navigateToNextPage(data);\n\n      return false;\n    } catch (error) {\n      await this.handleError(error);\n    }\n  }\n\n  private async obtainTransactionData(): Promise<QuickPaymentEntity> {\n    await this.loadingService.show();\n\n    const codeData = await this.retrieveQRData();\n\n    if (!codeData || await this.externalQrException(codeData)) {\n      await this.loadingService.hide();\n\n      return;\n    }\n\n    const data = await this.getTransactionData(codeData);\n\n    data.pocket = this.currentPocket;\n\n    await this.loadingService.hide();\n\n    return data;\n  }\n\n  private async externalQrException(qrString: string) {\n    try {\n      const qrStringTransformed = JSON.parse(qrString);\n\n      if (qrStringTransformed?.typeQR === QrType.EXTERNAL) {\n        await this.loadingService.hide();\n        this.alertService.showByI18n({\n          i18nKey: PaymentsConfig.i18n.externalQrError,\n          backdropDismiss: false,\n        });\n\n        return true;\n      }\n\n      return false;\n    } catch {\n      return false;\n    }\n  }\n\n  private async retrieveQRData(): Promise<string> {\n    const pendingTransaction = await this.quickPaymentInteractor.getPendingTransaction();\n\n    if (!pendingTransaction) {\n      return this.qrReaderService.launch(\n        this.paymentsConfigProvider.configViewQR,\n        this.paymentsConfigProvider.configButtonQR\n      );\n    }\n\n    this.quickPaymentInteractor.setPendingTransaction(null);\n\n    if (pendingTransaction.readingType === ReadingType.MANUAL) {\n      throw new GoToCodeException(ReadingType.MANUAL.toString());\n    }\n\n    return pendingTransaction.data;\n  }\n\n  private async handleError(error: unknown) {\n    if (error instanceof GoToCodeException) {\n      this.navigateToRedeemCode(error);\n\n      return;\n    }\n\n    await this.loadingService.hideWithoutFeedback();\n\n    if (error instanceof CoreException) {\n      const errorMessage = PaymentsConfig.errorMessages[error.code];\n\n      if (errorMessage) {\n        this.showMappedError(errorMessage);\n\n        return;\n      }\n    }\n\n    if (error instanceof UnrecognizedQrException) {\n      this.showProcessError();\n\n      return;\n    }\n\n    await this.alertService.showByI18n({\n      i18nKey: PaymentsConfig.i18n.readError,\n    });\n  }\n\n  private async getTransactionData(qrCode: string): Promise<QuickPaymentEntity> {\n    const paymentData = await this.quickPaymentInteractor.processTransaction(qrCode);\n\n    if (paymentData.issuer === QrIssuer.REDEEM_CODE) {\n      throw new GoToCodeException(paymentData.issuer, qrCode);\n    }\n\n    this.quickPaymentInteractor.setPendingTransaction(null);\n\n    return paymentData;\n  }\n\n  private showProcessError(i18nKey: string = PaymentsConfig.i18n.processError) {\n    this.alertService.showByI18n({\n      i18nKey: i18nKey,\n      handlers: {\n        accept: () => {\n          this.navController.navigateRoot(PaymentsConfig.routes.adminUrl);\n        },\n      },\n    });\n  }\n\n  private showMappedError(i18nKey: string) {\n    this.alertService.showByI18n({\n      i18nKey: i18nKey,\n      handlers: {\n        accept: () => {\n          this.initProcess();\n        },\n      },\n    });\n  }\n\n  private async navigateToRedeemCode(error: GoToCodeException) {\n    if (!error.data) {\n      this.navigateToRoute(PaymentsConfig.routes.redeemCode);\n\n      return;\n    }\n\n    this.navigateToValidateRedeemCode(error.data);\n  }\n\n  private async navigateToValidateRedeemCode(code: string) {\n    this.navigateToRoute(PaymentsConfig.routes.validateRedeemCode, {\n      state: { code: code, origin: OriginRedeemType.QR, hasCancelButton: false },\n    });\n  }\n\n  private async navigateToRoute(route: string, data?: unknown) {\n    await this.loadingService.hideWithoutFeedback();\n    await this.navController.navigateForward(route, data);\n  }\n\n  private navigateToNextPage(data: QuickPaymentEntity) {\n    if (!this.nextUrl) {\n      this.nextUrl = this.configureNextUrl(this.activeRoute, this.activeState, data);\n    }\n\n    this.navController.navigateForward(this.nextUrl, { state: data });\n  }\n\n  private configureNextUrl(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot,\n    data: QuickPaymentEntity\n  ): string {\n    let url = state.url.replace(route.url[0]?.path, PaymentsConfig.routes.payment);\n\n    if (data.issuer === QrIssuer.SEND) {\n      url = state.url.replace(\n        `${PaymentsConfig.paymentsRouteBase}${route.url[0]?.path}`,\n        PaymentsConfig.routes.sendFromQr\n      );\n    }\n\n    return url;\n  }\n}\n"],"sourceRoot":"webpack:///"}